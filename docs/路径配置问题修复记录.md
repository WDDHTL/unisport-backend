# è·¯å¾„é…ç½®é—®é¢˜ä¿®å¤è®°å½•

> **ä¿®å¤æ—¶é—´**: 2025-12-06  
> **é—®é¢˜ç±»å‹**: Controller è·¯å¾„ä¸ context-path é‡å¤é…ç½®

---

## âŒ é—®é¢˜ç°è±¡

å‰åç«¯è”è°ƒæ—¶å‡ºç° 404 é”™è¯¯ï¼š
```
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource matches.
```

å‰ç«¯è¯·æ±‚ï¼š`http://localhost:8080/api/matches`  
å®é™…åç«¯è·¯å¾„ï¼š`http://localhost:8080/api/api/matches`ï¼ˆåŒé‡ /apiï¼‰

---

## ğŸ” é—®é¢˜åŸå› 

### é…ç½®å†²çª

1. **application.properties** ä¸­é…ç½®ï¼š
   ```properties
   server.servlet.context-path=/api
   ```

2. **MatchController.java** ä¸­é…ç½®ï¼š
   ```java
   @RequestMapping("/api/matches")  // âŒ é”™è¯¯ï¼šé‡å¤æ·»åŠ  /api
   ```

3. **å®é™…ç”Ÿæˆçš„ URL**ï¼š
   ```
   /api + /api/matches = /api/api/matches
   ```

### ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿ

- `context-path` æ˜¯åº”ç”¨çº§åˆ«çš„ç»Ÿä¸€å‰ç¼€ï¼Œä¼šè‡ªåŠ¨æ·»åŠ åˆ°æ‰€æœ‰è¯·æ±‚è·¯å¾„
- Controller çš„ `@RequestMapping` åº”è¯¥é…ç½®ç›¸å¯¹äº context-path çš„è·¯å¾„
- å¦‚æœåœ¨ Controller ä¸­å†æ¬¡æ·»åŠ  `/api`ï¼Œä¼šå¯¼è‡´è·¯å¾„é‡å¤

---

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹ MatchController.java

**ä¿®æ”¹å‰**ï¼š
```java
@RestController
@RequestMapping("/api/matches")  // âŒ é”™è¯¯
public class MatchController {
```

**ä¿®æ”¹å**ï¼š
```java
@RestController
@RequestMapping("/matches")  // âœ… æ­£ç¡®
public class MatchController {
```

### æ­£ç¡®çš„ URL æ˜ å°„

| context-path | Controller @RequestMapping | æœ€ç»ˆ URL |
|--------------|---------------------------|----------|
| `/api` | `/matches` | `http://localhost:8080/api/matches` âœ… |
| `/api` | `/api/matches` | `http://localhost:8080/api/api/matches` âŒ |

---

## ğŸ¯ éªŒè¯ç»“æœ

### 1. æ¥å£æµ‹è¯•æˆåŠŸ

```bash
# PowerShell æµ‹è¯•
Invoke-WebRequest -Uri "http://localhost:8080/api/matches" -Method GET
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "categoryCode": "football",
        "categoryName": "è¶³çƒ",
        "teamAName": "è®¡ç®—æœºå­¦é™¢è¶³çƒé˜Ÿ",
        "teamBName": "åŒ–å­¦é™¢è¶³çƒé˜Ÿ",
        "scoreA": 2,
        "scoreB": 1,
        "status": "finished",
        "matchTime": "2024-10-15 14:00:00",
        "location": "ä¸»ä½“è‚²åœº"
      }
    ],
    "total": 6,
    "size": 10,
    "current": 1,
    "pages": 1
  },
  "timestamp": 1733459309223
}
```

### 2. Knife4j æ–‡æ¡£è®¿é—®æ­£å¸¸

```
http://localhost:8080/doc.html
```

åœ¨ **èµ›äº‹æ¨¡å—** ä¸­å¯ä»¥çœ‹åˆ° **è·å–æ¯”èµ›åˆ—è¡¨** æ¥å£ï¼Œè·¯å¾„æ˜¾ç¤ºä¸º `/api/matches`

---

## ğŸ“š ç›¸å…³çŸ¥è¯†ç‚¹

### Spring Boot Context Path é…ç½®

1. **ä½œç”¨**ï¼šä¸ºåº”ç”¨æ·»åŠ ç»Ÿä¸€çš„ URL å‰ç¼€
2. **é…ç½®ä½ç½®**ï¼š`application.properties`
   ```properties
   server.servlet.context-path=/api
   ```

3. **å½±å“èŒƒå›´**ï¼š
   - âœ… æ‰€æœ‰ Controller æ¥å£
   - âœ… é™æ€èµ„æº
   - âœ… Swagger/Knife4j æ–‡æ¡£
   - âŒ Actuator ç«¯ç‚¹ï¼ˆéœ€å•ç‹¬é…ç½®ï¼‰

### Controller è·¯å¾„é…ç½®è§„èŒƒ

| åœºæ™¯ | @RequestMapping é…ç½® | ç¤ºä¾‹ |
|------|---------------------|------|
| æ—  context-path | ä½¿ç”¨ç»å¯¹è·¯å¾„ | `@RequestMapping("/api/matches")` |
| æœ‰ context-path | ä½¿ç”¨ç›¸å¯¹è·¯å¾„ | `@RequestMapping("/matches")` |

---

## ğŸš¨ å¸¸è§é”™è¯¯

### é”™è¯¯ 1ï¼šé‡å¤æ·»åŠ å‰ç¼€
```java
// application.properties: server.servlet.context-path=/api
@RequestMapping("/api/matches")  // âŒ å¯¼è‡´ /api/api/matches
```

### é”™è¯¯ 2ï¼šå¿˜è®°é…ç½® context-path
```java
// application.properties: æœªé…ç½® context-path
@RequestMapping("/matches")  // âŒ è®¿é—®è·¯å¾„ä¸º /matches è€Œé /api/matches
```

### é”™è¯¯ 3ï¼šéƒ¨åˆ† Controller é…ç½®ä¸ä¸€è‡´
```java
// CategoryController.java
@RequestMapping("/categories")  // âœ… æ­£ç¡®

// MatchController.java  
@RequestMapping("/api/matches")  // âŒ é”™è¯¯ï¼šä¸ä¸€è‡´
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ç»Ÿä¸€é…ç½® context-path**ï¼šåœ¨ `application.properties` ä¸­é…ç½®ä¸€æ¬¡
2. **Controller ä½¿ç”¨ç›¸å¯¹è·¯å¾„**ï¼šæ‰€æœ‰ Controller éƒ½ä½¿ç”¨ç›¸å¯¹äº context-path çš„è·¯å¾„
3. **ä¿æŒä¸€è‡´æ€§**ï¼šé¡¹ç›®ä¸­æ‰€æœ‰ Controller éµå¾ªç›¸åŒçš„é…ç½®è§„èŒƒ
4. **æ–‡æ¡£æ³¨é‡Š**ï¼šåœ¨ Controller æ³¨é‡Šä¸­è¯´æ˜å®Œæ•´çš„è®¿é—®è·¯å¾„

### æ¨èçš„ Controller æ³¨é‡Šæ¨¡æ¿

```java
/**
 * æ¯”èµ›æ§åˆ¶å™¨
 * 
 * åŸºç¡€è·¯å¾„ï¼š/api/matches
 * - GET  /api/matches           è·å–æ¯”èµ›åˆ—è¡¨
 * - GET  /api/matches/{id}      è·å–æ¯”èµ›è¯¦æƒ…
 * - POST /api/matches           åˆ›å»ºæ¯”èµ›
 *
 * @author UniSport Team
 */
@RestController
@RequestMapping("/matches")  // ç›¸å¯¹äº context-path
public class MatchController {
    // ...
}
```

---

## ğŸ“ æ£€æŸ¥æ¸…å•

åœ¨å¼€å‘æ–°çš„ Controller æ—¶ï¼Œè¯·æ£€æŸ¥ï¼š

- [ ] `application.properties` ä¸­æ˜¯å¦é…ç½®äº† `context-path`
- [ ] Controller çš„ `@RequestMapping` æ˜¯å¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„
- [ ] æ˜¯å¦ä¸é¡¹ç›®ä¸­å…¶ä»– Controller ä¿æŒä¸€è‡´
- [ ] åœ¨ Knife4j æ–‡æ¡£ä¸­éªŒè¯è·¯å¾„æ˜¯å¦æ­£ç¡®
- [ ] ä½¿ç”¨æµè§ˆå™¨æˆ– Postman æµ‹è¯•æ¥å£æ˜¯å¦å¯è®¿é—®

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Spring Boot å®˜æ–¹æ–‡æ¡£ - Web Properties](https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server)
- [API æ–‡æ¡£](./API.md) - æŸ¥çœ‹æ‰€æœ‰æ¥å£è·¯å¾„è§„èŒƒ

---

**ä¿®å¤äººå‘˜**: AI Assistant  
**éªŒè¯çŠ¶æ€**: âœ… å·²éªŒè¯é€šè¿‡  
**å½±å“èŒƒå›´**: MatchController
