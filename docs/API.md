# UniSport API æ¥å£æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.1.0  
> **æ›´æ–°æ—¶é—´**: 2025-12-03  
> **åŸºç¡€URL**: `http://localhost:8080/api`  
> **å‰ç«¯åœ°å€**: `http://localhost:5173`

---

## ğŸ“‹ ç›®å½•

- [1. æ¥å£è§„èŒƒ](#1-æ¥å£è§„èŒƒ)
- [2. è®¤è¯æˆæƒæ¨¡å—](#2-è®¤è¯æˆæƒæ¨¡å—)
- [3. ç”¨æˆ·æ¨¡å—](#3-ç”¨æˆ·æ¨¡å—)
- [4. èµ›äº‹æ¨¡å—](#4-èµ›äº‹æ¨¡å—)
- [5. ç¤¾äº¤æ¨¡å—](#5-ç¤¾äº¤æ¨¡å—)
- [6. æ¶ˆæ¯é€šçŸ¥æ¨¡å—](#6-æ¶ˆæ¯é€šçŸ¥æ¨¡å—)
- [7. ç³»ç»ŸåŠŸèƒ½æ¨¡å—](#7-ç³»ç»ŸåŠŸèƒ½æ¨¡å—)
- [8. é”™è¯¯ç è¯´æ˜](#8-é”™è¯¯ç è¯´æ˜)
- [9. å‰ç«¯é¡µé¢ä¸æ¥å£å¯¹åº”å…³ç³»](#9-å‰ç«¯é¡µé¢ä¸æ¥å£å¯¹åº”å…³ç³»)

---

## 1. æ¥å£è§„èŒƒ

### 1.1 ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£ç»Ÿä¸€è¿”å›ä»¥ä¸‹JSONæ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": 1701234567890
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `code`: çŠ¶æ€ç ï¼ˆ200æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ï¼‰
- `message`: è¿”å›æ¶ˆæ¯
- `data`: è¿”å›æ•°æ®ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„æˆ–nullï¼‰
- `timestamp`: æ—¶é—´æˆ³

### 1.2 åˆ†é¡µå“åº”æ ¼å¼

åˆ†é¡µæ¥å£é¢å¤–åŒ…å«åˆ†é¡µä¿¡æ¯ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [],
    "total": 100,
    "current": 1,
    "size": 10,
    "pages": 10
  },
  "timestamp": 1701234567890
}
```

### 1.3 HTTP çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|---------|
| 200 | æ“ä½œæˆåŠŸ | è¯·æ±‚å¤„ç†æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ | POST è¯·æ±‚åˆ›å»ºèµ„æºæˆåŠŸ |
| 400 | å‚æ•°é”™è¯¯ | è¯·æ±‚å‚æ•°ä¸åˆæ³• |
| 401 | æœªè®¤è¯ | Token ç¼ºå¤±æˆ–æ— æ•ˆ |
| 403 | æ— æƒé™ | æ²¡æœ‰æ“ä½œæƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### 1.4 è¯·æ±‚å¤´

#### å…¬å¼€æ¥å£ï¼ˆæ— éœ€è®¤è¯ï¼‰
```http
Content-Type: application/json
```

#### éœ€è®¤è¯æ¥å£
```http
Content-Type: application/json
Authorization: Bearer <JWT Token>
```

---

## 2. è®¤è¯æˆæƒæ¨¡å—

### 2.1 ç”¨æˆ·æ³¨å†Œ

**æ¥å£**: `POST /api/auth/register`

**ä½¿ç”¨åœºæ™¯**:
- æ–°ç”¨æˆ·é€šè¿‡æ³¨å†Œé¡µé¢åˆ›å»ºè´¦å·
- åŸºäºå­¦å·éªŒè¯å­¦ç”Ÿèº«ä»½ï¼ˆè½¯ç»‘å®šï¼‰
- æ³¨å†ŒæˆåŠŸåè·³è½¬åˆ°ç™»å½•é¡µé¢

**å‰ç«¯é¡µé¢**: `Register.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "account": "2024001",
  "password": "123456",
  "school": "æ¸…åå¤§å­¦",
  "schoolId": 1,
  "department": "è®¡ç®—æœºç³»",
  "departmentId": 1,
  "studentId": "2024001001"
}
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| account | String | æ˜¯ | è´¦å·ï¼ˆæ‰‹æœºå·/å­¦å·ï¼‰ |
| password | String | æ˜¯ | å¯†ç ï¼ˆ6-20ä½ï¼‰ |
| school | String | æ˜¯ | å­¦æ ¡åç§° |
| schoolId | Long | æ˜¯ | å­¦æ ¡IDï¼ˆæ³¨å†Œæ—¶ç»‘å®šï¼Œæ ‡è¯†ç”¨æˆ·å½“å‰å°±è¯»å­¦æ ¡ï¼‰ |
| department | String | æ˜¯ | å­¦é™¢åç§° |
| departmentId | Long | æ˜¯ | å­¦é™¢ID |
| studentId | String | æ˜¯ | å­¦å·ï¼ˆç”¨äºèº«ä»½éªŒè¯ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": 1,
    "account": "2024001",
    "nickname": "2024001",
    "school": "æ¸…åå¤§å­¦",
    "schoolId": 1,
    "department": "è®¡ç®—æœºç³»",
    "studentId": "2024001001",
    "createdAt": "2025-12-01T10:00:00"
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:

```json
{
  "code": 40005,
  "message": "å­¦å·éªŒè¯å¤±è´¥ï¼šè¯¥å­¦å·ä¸å­˜åœ¨æˆ–å­¦æ ¡/å­¦é™¢ä¿¡æ¯ä¸åŒ¹é…",
  "data": null
}
```

**æ³¨å†ŒéªŒè¯é€»è¾‘**:

1. âœ… **åŸºç¡€æ ¡éªŒ**ï¼š
   - è´¦å·å”¯ä¸€æ€§æ ¡éªŒ
   - å¯†ç å¼ºåº¦æ ¡éªŒ
   - å¿…å¡«å­—æ®µå®Œæ•´æ€§æ ¡éªŒ

2. ğŸ“ **å­¦ç”Ÿèº«ä»½éªŒè¯ï¼ˆè½¯ç»‘å®šï¼‰**ï¼š
   ```sql
   SELECT * FROM students 
   WHERE student_id = ? 
     AND school_id = ? 
     AND department_id = ? 
     AND status = 1
   ```
   - å¦‚æœæŸ¥è¯¢åˆ°è®°å½•ï¼šéªŒè¯é€šè¿‡ï¼Œå…è®¸æ³¨å†Œ
   - å¦‚æœæŸ¥è¯¢ä¸åˆ°ï¼šæ³¨å†Œå¤±è´¥ï¼Œè¿”å›é”™è¯¯ç  40005

3. ğŸ’¾ **åˆ›å»ºç”¨æˆ·**ï¼š
   - å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
   - users.student_id å­—æ®µè®°å½•å­¦å·ï¼ˆä¸ students.student_id è½¯å…³è”ï¼‰
   - users.school_id å­—æ®µè®°å½•å½“å‰å°±è¯»å­¦æ ¡ID
   - é»˜è®¤æ˜µç§°ä¸ºè´¦å·ï¼Œç”¨æˆ·å¯åç»­ä¿®æ”¹

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
2. âš ï¸ è´¦å·å”¯ä¸€æ€§æ ¡éªŒ
3. âš ï¸ å­¦å·å¿…é¡»åœ¨ students è¡¨ä¸­å­˜åœ¨ä¸”å­¦æ ¡/å­¦é™¢ä¿¡æ¯åŒ¹é…
4. âš ï¸ å­¦ç”ŸçŠ¶æ€å¿…é¡»ä¸ºåœ¨æ ¡ï¼ˆstatus=1ï¼‰
5. âš ï¸ schoolId ä¸ºå¿…å¡«å­—æ®µï¼Œæ³¨å†Œæ—¶å³ç»‘å®šç”¨æˆ·å½“å‰å°±è¯»å­¦æ ¡
6. ğŸ’¡ å‰ç«¯æä¾›å­¦æ ¡å­¦é™¢ä¸‹æ‹‰é€‰æ‹©ï¼ˆè°ƒç”¨ GET /api/schools å’Œ GET /api/departmentsï¼‰
7. ğŸ’¡ å­¦å·è¾“å…¥æ¡†å®æ—¶éªŒè¯æ ¼å¼

---

### 2.2 ç”¨æˆ·ç™»å½•

**æ¥å£**: `POST /api/auth/login`

**ä½¿ç”¨åœºæ™¯**:
- ç”¨æˆ·ç™»å½•è·å– JWT Token

**å‰ç«¯é¡µé¢**: `Login.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "account": "2024001",
  "password": "123456"
}
```

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "nickname": "å¼ ä¸‰",
      "avatar": "https://example.com/avatar.jpg"
    }
  }
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ Token å­˜å‚¨åœ¨ localStorage
2. âš ï¸ Token é»˜è®¤7å¤©æœ‰æ•ˆ
3. ğŸ’¡ ç™»å½•å¤±è´¥3æ¬¡åå¢åŠ éªŒè¯ç 

---

## 3. ç”¨æˆ·æ¨¡å—

### 3.1 è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `GET /api/users/{id}`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹ç”¨æˆ·ä¸»é¡µ
- æŸ¥çœ‹å¸–å­ä½œè€…ä¿¡æ¯

**å‰ç«¯é¡µé¢**: `UserProfile.tsx`, `Profile.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "id": 2,
    "nickname": "æå››",
    "avatar": "https://example.com/avatar.jpg",
    "school": "æ¸…åå¤§å­¦",
    "schoolId": 1,
    "department": "ç»ç®¡å­¦é™¢",
    "bio": "ç¯®çƒçˆ±å¥½è€…",
    "followersCount": 120,
    "followingCount": 50,
    "postsCount": 35,
    "isFollowing": false
  }
}
```

---

### 3.2 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `PUT /api/users/{id}`

**ä½¿ç”¨åœºæ™¯**:
- ç¼–è¾‘ä¸ªäººèµ„æ–™

**å‰ç«¯é¡µé¢**: `EditProfile.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "nickname": "å¼ ä¸‰ä¸°",
  "avatar": "https://example.com/avatar.jpg",
  "bio": "çƒ­çˆ±è¿åŠ¨",
  "gender": "male"
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ åªèƒ½ä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯
2. âš ï¸ éƒ¨åˆ†æ›´æ–°ï¼Œæœªæäº¤å­—æ®µä¿æŒä¸å˜
3. âš ï¸ accountã€schoolã€departmentã€student_idã€school_id ä¸å¯ä¿®æ”¹
4. ğŸ’¡ å­¦æ ¡å’Œé™¢ç³»ä¿¡æ¯é€šè¿‡æ•™è‚²ç»å†è¡¨ç®¡ç†
5. ğŸ’¡ school_id åªèƒ½é€šè¿‡æ·»åŠ æ•™è‚²ç»å†æ›´æ–°ï¼Œä¸å…è®¸ç”¨æˆ·éšæ„ä¿®æ”¹

---

### 3.3 å…³æ³¨ç”¨æˆ·

**æ¥å£**: `POST /api/users/{id}/follow`

**ä½¿ç”¨åœºæ™¯**:
- å…³æ³¨å…¶ä»–ç”¨æˆ·

**å‰ç«¯é¡µé¢**: `UserProfile.tsx`

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ ä¸èƒ½å…³æ³¨è‡ªå·±
2. âš ï¸ æ£€æŸ¥é‡å¤å…³æ³¨
3. âš ï¸ å‘é€é€šçŸ¥ç»™è¢«å…³æ³¨è€…

---

### 3.4 å–æ¶ˆå…³æ³¨

**æ¥å£**: `DELETE /api/users/{id}/follow`

**ä½¿ç”¨åœºæ™¯**:
- å–æ¶ˆå…³æ³¨ç”¨æˆ·

**å‰ç«¯é¡µé¢**: `UserProfile.tsx`, `FollowingList.tsx`

---

### 3.5 è·å–å…³æ³¨åˆ—è¡¨

**æ¥å£**: `GET /api/users/{id}/following`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹å…³æ³¨åˆ—è¡¨

**å‰ç«¯é¡µé¢**: `FollowingList.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| current | Integer | 1 | é¡µç  |
| size | Integer | 20 | æ¯é¡µå¤§å° |

---

### 3.6 è·å–ç”¨æˆ·æ•™è‚²ç»å†åˆ—è¡¨

**æ¥å£**: `GET /api/users/{id}/educations`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹ç”¨æˆ·çš„æ‰€æœ‰æ•™è‚²ç»å†
- ä¸ªäººä¿¡æ¯é¡µé¢å±•ç¤ºæ•™è‚²èƒŒæ™¯

**å‰ç«¯é¡µé¢**: `EditProfile.tsx`, `Profile.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "userId": 1,
      "school": "æ¸…åå¤§å­¦",
      "schoolId": 1,
      "department": "è®¡ç®—æœºç³»",
      "departmentId": 1,
      "studentId": "2021123456",
      "startDate": "2021-09",
      "endDate": "2025-06",
      "isPrimary": true,
      "status": "verified",
      "createdAt": "2025-12-01T10:00:00"
    },
    {
      "id": 2,
      "userId": 1,
      "school": "åŒ—äº¬å¤§å­¦",
      "schoolId": 2,
      "department": "å…‰åç®¡ç†å­¦é™¢",
      "departmentId": 5,
      "studentId": "2025001234",
      "startDate": "2025-09",
      "endDate": null,
      "isPrimary": false,
      "status": "pending",
      "createdAt": "2025-12-03T14:00:00"
    }
  ]
}
```

**å­—æ®µè¯´æ˜**:

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Long | æ•™è‚²ç»å†ID |
| userId | Long | ç”¨æˆ·ID |
| school | String | å­¦æ ¡åç§° |
| schoolId | Long | å­¦æ ¡ID |
| department | String | é™¢ç³»åç§° |
| departmentId | Long | é™¢ç³»ID |
| studentId | String | å­¦å· |
| startDate | String | å¼€å§‹æ—¶é—´ï¼ˆæ ¼å¼ï¼šYYYY-MMï¼‰ |
| endDate | String | ç»“æŸæ—¶é—´ï¼ˆnullè¡¨ç¤ºè‡³ä»Šï¼‰ |
| isPrimary | Boolean | æ˜¯å¦ä¸ºä¸»è¦æ•™è‚²ç»å† |
| status | String | éªŒè¯çŠ¶æ€ï¼špending(å¾…éªŒè¯)/verified(å·²éªŒè¯)/failed(éªŒè¯å¤±è´¥) |
| createdAt | DateTime | åˆ›å»ºæ—¶é—´ |

**æ³¨æ„äº‹é¡¹**:
1. ğŸ’¡ æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—
2. ğŸ’¡ isPrimary=true çš„è®°å½•ä¼˜å…ˆå±•ç¤º
3. ğŸ’¡ statuså­—æ®µç”¨äºæ ‡è¯†å­¦å·éªŒè¯çŠ¶æ€

---

### 3.7 æ·»åŠ æ•™è‚²ç»å†

**æ¥å£**: `POST /api/users/educations`

**ä½¿ç”¨åœºæ™¯**:
- ç”¨æˆ·æ·»åŠ æ–°çš„æ•™è‚²ç»å†
- æ”¯æŒå‡å­¦åæ·»åŠ æ–°å­¦æ ¡ä¿¡æ¯

**å‰ç«¯é¡µé¢**: `AddEducation.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "schoolId": 1,
  "departmentId": 1,
  "studentId": "2021123456",
  "startDate": "2021-09",
  "endDate": "2025-06",
  "isPrimary": true
}
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| schoolId | Long | æ˜¯ | å­¦æ ¡ID |
| departmentId | Long | æ˜¯ | é™¢ç³»ID |
| studentId | String | æ˜¯ | å­¦å· |
| startDate | String | å¦ | å¼€å§‹æ—¶é—´ï¼ˆæ ¼å¼ï¼šYYYY-MMï¼‰ |
| endDate | String | å¦ | ç»“æŸæ—¶é—´ï¼ˆnullè¡¨ç¤ºè‡³ä»Šï¼‰ |
| isPrimary | Boolean | å¦ | æ˜¯å¦è®¾ä¸ºä¸»è¦æ•™è‚²ç»å†ï¼Œé»˜è®¤false |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "æ·»åŠ æˆåŠŸ",
  "data": {
    "id": 2,
    "userId": 1,
    "school": "æ¸…åå¤§å­¦",
    "schoolId": 1,
    "department": "è®¡ç®—æœºç³»",
    "departmentId": 1,
    "studentId": "2021123456",
    "startDate": "2021-09",
    "endDate": "2025-06",
    "isPrimary": true,
    "status": "verified",
    "createdAt": "2025-12-03T14:00:00"
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:

```json
{
  "code": 40005,
  "message": "å­¦å·éªŒè¯å¤±è´¥ï¼šè¯¥å­¦å·ä¸å­˜åœ¨æˆ–å­¦æ ¡/å­¦é™¢ä¿¡æ¯ä¸åŒ¹é…",
  "data": null
}
```

**éªŒè¯é€»è¾‘**:

1. âœ… **å­¦å·éªŒè¯**ï¼ˆå¿…é¡»ï¼‰ï¼š
   ```sql
   SELECT * FROM students 
   WHERE student_id = ? 
     AND school_id = ? 
     AND department_id = ? 
     AND status = 1
   ```
   - å¦‚æœæŸ¥è¯¢åˆ°è®°å½•ï¼šéªŒè¯é€šè¿‡ï¼Œstatusè®¾ä¸º"verified"
   - å¦‚æœæŸ¥è¯¢ä¸åˆ°ï¼šæ·»åŠ å¤±è´¥ï¼Œè¿”å›é”™è¯¯ç  40005

2. âœ… **å”¯ä¸€æ€§æ ¡éªŒ**ï¼š
   - æ£€æŸ¥åŒä¸€ç”¨æˆ·æ˜¯å¦å·²æ·»åŠ ç›¸åŒå­¦æ ¡+å­¦å·çš„æ•™è‚²ç»å†
   - é¿å…é‡å¤æ·»åŠ 

3. âœ… **ä¸»æ•™è‚²ç»å†å¤„ç†**ï¼š
   - å¦‚æœ isPrimary=trueï¼Œå°†å…¶ä»–æ•™è‚²ç»å†çš„ isPrimary è®¾ä¸º false
   - ç¡®ä¿æ¯ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªä¸»è¦æ•™è‚²ç»å†

4. âœ… **æ›´æ–°usersè¡¨school_id**ï¼š
   - æ·»åŠ æˆåŠŸåï¼Œè‡ªåŠ¨æ›´æ–°users.school_idä¸ºæ–°æ•™è‚²ç»å†çš„school_id
   - ç¡®ä¿ç”¨æˆ·å½“å‰å­¦æ ¡ä¿¡æ¯æ˜¯æœ€æ–°çš„

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ å­¦å·å¿…é¡»åœ¨ students è¡¨ä¸­å­˜åœ¨ä¸”å­¦æ ¡/å­¦é™¢ä¿¡æ¯åŒ¹é…
2. âš ï¸ åŒä¸€ç”¨æˆ·ä¸èƒ½æ·»åŠ é‡å¤çš„å­¦æ ¡+å­¦å·ç»„åˆ
3. âš ï¸ åªèƒ½æ·»åŠ è‡ªå·±çš„æ•™è‚²ç»å†
4. âš ï¸ æ·»åŠ æˆåŠŸåä¼šè‡ªåŠ¨æ›´æ–°users.school_idä¸ºæ–°å­¦æ ¡ID
5. ğŸ’¡ æ·»åŠ æˆåŠŸåè¿”å›å®Œæ•´çš„æ•™è‚²ç»å†ä¿¡æ¯ï¼ˆåŒ…æ‹¬å­¦æ ¡å’Œé™¢ç³»åç§°ï¼‰
6. ğŸ’¡ å‰ç«¯éœ€è°ƒç”¨ GET /api/schools å’Œ GET /api/departments æ¥å£è·å–ä¸‹æ‹‰é€‰é¡¹

---

### 3.8 åˆ é™¤æ•™è‚²ç»å†

**æ¥å£**: `DELETE /api/users/educations/{id}`

**ä½¿ç”¨åœºæ™¯**:
- åˆ é™¤é”™è¯¯æˆ–è¿‡æœŸçš„æ•™è‚²ç»å†

**å‰ç«¯é¡µé¢**: `EditProfile.tsx`

**è·¯å¾„å‚æ•°**:

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Long | æ•™è‚²ç»å†ID |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ åªèƒ½åˆ é™¤è‡ªå·±çš„æ•™è‚²ç»å†
2. âš ï¸ å¦‚æœåˆ é™¤çš„æ˜¯ä¸»æ•™è‚²ç»å†ï¼ˆisPrimary=trueï¼‰ï¼Œéœ€æç¤ºç”¨æˆ·è®¾ç½®æ–°çš„ä¸»æ•™è‚²ç»å†
3. ğŸ’¡ å»ºè®®è‡³å°‘ä¿ç•™ä¸€æ¡æ•™è‚²ç»å†

---

## 4. èµ›äº‹æ¨¡å—

### 4.1 è·å–è¿åŠ¨åˆ†ç±»

**æ¥å£**: `GET /api/categories`

**ä½¿ç”¨åœºæ™¯**:
- é¦–é¡µå¯¼èˆªæ å±•ç¤ºåˆ†ç±»
- å‘å¸–æ—¶é€‰æ‹©åˆ†ç±»

**å‰ç«¯é¡µé¢**: `Navbar.tsx`, `CreatePost.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "code": "football",
      "name": "è¶³çƒ",
      "icon": "âš½",
      "sortOrder": 1
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ æŒ‰ sortOrder æ’åº
2. ğŸ’¡ å‰ç«¯å¯åŠ¨æ—¶è·å–ä¸€æ¬¡å³å¯

---

### 4.2 è·å–æ¯”èµ›åˆ—è¡¨

**æ¥å£**: `GET /api/matches`

**ä½¿ç”¨åœºæ™¯**:
- é¦–é¡µå±•ç¤ºæœ€è¿‘æ¯”èµ›
- å…¨éƒ¨èµ›äº‹åˆ—è¡¨

**å‰ç«¯é¡µé¢**: `MatchList.tsx`, `AllMatches.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| categoryId | Long | null | è¿åŠ¨åˆ†ç±»IDï¼ˆå¯é€‰ï¼Œç­›é€‰æŸè¿åŠ¨åˆ†ç±»çš„æ¯”èµ›ï¼‰ |
| schoolId | Long | null | å­¦æ ¡IDï¼ˆå¯é€‰ï¼Œç­›é€‰æŸå­¦æ ¡çš„æ¯”èµ›ï¼‰ |
| leagueId | Long | null | è”èµ›IDï¼ˆå¯é€‰ï¼Œç­›é€‰æŸè”èµ›çš„æ¯”èµ›ï¼‰ |
| status | String | all | æ¯”èµ›çŠ¶æ€ï¼šupcoming/live/finished/all |
| seasonYear | Integer/String | null | å¹´åº¦èµ›å­£ï¼ˆå¯é€‰ï¼Œé…åˆâ€œå…¨éƒ¨èµ›äº‹â€å¹´ä»½ä¸‹æ‹‰ï¼›åç«¯æŒ‰å¹´ä»½è¿‡æ»¤ï¼Œå‰ç«¯ä¼˜å…ˆä½¿ç”¨æ­¤å‚æ•°ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": 1,
        "leagueId": 1,
        "leagueName": "2025æ–°ç”Ÿæ¯",
        "schoolId": 1,
        "schoolName": "æ¸…åå¤§å­¦",
        "categoryCode": "football",
        "categoryName": "è¶³çƒ",
        "teamAName": "è®¡ç®—æœºç³»",
        "teamBName": "ç»ç®¡å­¦é™¢",
        "scoreA": 2,
        "scoreB": 1,
        "status": "finished",
        "matchTime": "2025-11-30T16:00:00",
        "location": "åŒ—åŒºä½“è‚²åœº"
      }
    ],
    "total": 25,
    "pages": 3
  }
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ æŒ‰æ¯”èµ›æ—¶é—´å€’åºï¼Œ`matchTime` è¯·è¿”å›æ ‡å‡† ISO å­—ç¬¦ä¸²ï¼ˆå‰ç«¯åŸºäºå®ƒè§£æå¹´ä»½ä½œä¸ºå…œåº•ï¼‰
2. âš ï¸ å®æ—¶æ¯”èµ›æ¯30ç§’è½®è¯¢
3. ğŸ’¡ schoolId å’Œ leagueId å¯ç”¨äºç­›é€‰ç‰¹å®šå­¦æ ¡æˆ–è”èµ›çš„æ¯”èµ›ï¼›â€œå…¨éƒ¨èµ›äº‹â€é¡µä¼šæŠŠè”èµ›ä¸‹æ‹‰çš„é€‰é¡¹é€ä¼ ä¸º leagueId
4. ğŸ’¡ ç§»åŠ¨ç«¯åº”ç”¨ä¸ä½¿ç”¨åˆ†é¡µï¼Œåç«¯è¿”å›æ‰€æœ‰æ¯”èµ›
5. ğŸ’¡ å¦‚æœåç«¯å¯ç›´æ¥è¿”å› `season` å­—æ®µæˆ–æ”¯æŒ `seasonYear` æŸ¥è¯¢ï¼Œå¯å‡å°‘å‰ç«¯æ—¥æœŸè§£æï¼›å»ºè®®é¢å¤–æä¾› `GET /api/matches/season-years?categoryId=` è¿”å›å¯é€‰å¹´ä»½åˆ—è¡¨ï¼Œä¾›â€œå¹´åº¦èµ›å­£â€ä¸‹æ‹‰ä½¿ç”¨

---

#### 4.2.1 è·å–è”èµ›åˆ—è¡¨ï¼ˆç”¨äºè”èµ›ä¸‹æ‹‰ï¼‰

**æ¥å£**: `GET /api/leagues`

**ç”¨é€”**:
- â€œå…¨éƒ¨èµ›äº‹â€é¡µè”èµ›ä¸‹æ‹‰é€‰é¡¹ï¼ˆæŒ‰åˆ†ç±»ç­›é€‰è”èµ›ï¼‰
- å…¶ä»–éœ€è¦æŒ‰è”èµ›ç­›é€‰æ¯”èµ›/ç§¯åˆ†æ¦œçš„å…¥å£

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| categoryId | Long | æ˜¯ | è¿åŠ¨åˆ†ç±»IDï¼ˆè¿”å›è¯¥åˆ†ç±»ä¸‹çš„è”èµ›åˆ—è¡¨ï¼‰ |
| schoolId | Long | å¦ | å­¦æ ¡IDï¼ˆå¯é€‰ï¼Œè‹¥è”èµ›æŒ‰å­¦æ ¡ç»´åº¦æ‹†åˆ†åˆ™æä¾›ï¼‰ |

**æˆåŠŸå“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "data": [
    { "id": 11, "name": "2025 æ ¡å›­æ¯", "categoryId": 1 },
    { "id": 12, "name": "é™¢ç³»è”èµ›", "categoryId": 1 }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. å‰ç«¯ä¼šå°† `id` ä½œä¸º `leagueId` ä¼ å…¥ `/api/matches` æŸ¥è¯¢å‚æ•°
2. å»ºè®®è¿”å›çŠ¶æ€å­—æ®µï¼ˆå¦‚ active/archivedï¼‰ä¾¿äºå‰ç«¯éšè—å·²å½’æ¡£è”èµ›
3. è‹¥æš‚ä¸æä¾›è¯¥æ¥å£ï¼Œå‰ç«¯ä¼š fallback ä»¥å½“å‰åˆ†ç±»ä¸‹çš„æ¯”èµ›åˆ—è¡¨ä¸­ `league` å­—æ®µå»é‡ç”Ÿæˆé€‰é¡¹

---

### 4.3 è·å–æ¯”èµ›è¯¦æƒ…

**æ¥å£**: `GET /api/matches/{id}`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹æ¯”èµ›è¯¦ç»†ä¿¡æ¯
- æŸ¥çœ‹çƒå‘˜é˜µå®¹å’Œäº‹ä»¶æ—¶é—´è½´

**å‰ç«¯é¡µé¢**: `MatchDetail.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "teamAName": "è®¡ç®—æœºç³»",
    "teamBName": "ç»ç®¡å­¦é™¢",
    "scoreA": 2,
    "scoreB": 1,
    "playersA": [
      {
        "id": 1,
        "playerName": "å¼ ä¸‰",
        "jerseyNumber": 10,
        "position": "FW"
      }
    ],
    "events": [
      {
        "id": 1,
        "eventType": "goal",
        "minute": 23,
        "description": "å¼ ä¸‰ åŠ²å°„ç ´é—¨"
      }
    ]
  }
}
```

---

### 4.4 è·å–ç§¯åˆ†æ¦œ

**æ¥å£**: `GET /api/standings`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹è”èµ›ç§¯åˆ†æ’å

**å‰ç«¯é¡µé¢**: `Standings.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| leagueId | Long | æ˜¯ | è”èµ›IDï¼ˆå¿…é¡»æŒ‡å®šè”èµ›ï¼‰ |
| categoryId | Long | å¦ | è¿åŠ¨åˆ†ç±»IDï¼ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼‰ |
| year | Integer | å¦ | å¹´ä»½ï¼Œé»˜è®¤å½“å‰å¹´ä»½ï¼ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "rank": 1,
      "teamId": 5,
      "teamName": "è®¡ç®—æœºç³»",
      "leagueId": 1,
      "leagueName": "2025æ–°ç”Ÿæ¯",
      "played": 5,
      "won": 4,
      "drawn": 1,
      "lost": 0,
      "points": 13
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ è®¡åˆ†è§„åˆ™ï¼šèƒœ3åˆ†ã€å¹³1åˆ†ã€è´Ÿ0åˆ†
2. ğŸ’¡ ç¼“å­˜ç§¯åˆ†æ¦œæ•°æ®
3. ğŸ’¡ æ–°ç‰ˆæœ¬ä¼˜å…ˆä½¿ç”¨ leagueId æŸ¥è¯¢ï¼ŒcategoryId+year ä»…ä½œä¸ºå…¼å®¹

---

### 4.5 è·å–çƒå‘˜ç»Ÿè®¡

**æ¥å£**: `GET /api/player-stats`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹å°„æ‰‹æ¦œã€å¾—åˆ†æ¦œ

**å‰ç«¯é¡µé¢**: `PlayerStats.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| leagueId | Long | æ˜¯ | è”èµ›IDï¼ˆå¿…é¡»æŒ‡å®šè”èµ›ï¼‰ |
| categoryId | Long | å¦ | è¿åŠ¨åˆ†ç±»IDï¼ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼‰ |
| year | Integer | å¦ | å¹´ä»½ï¼ˆå…¼å®¹æ—§ç‰ˆæœ¬ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "rank": 1,
      "playerName": "å¼ ä¸‰",
      "teamName": "è®¡ç®—æœºç³»",
      "leagueId": 1,
      "leagueName": "2025æ–°ç”Ÿæ¯",
      "played": 5,
      "goals": 8
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. ğŸ’¡ æ–°ç‰ˆæœ¬ä¼˜å…ˆä½¿ç”¨ leagueId æŸ¥è¯¢ï¼ŒcategoryId+year ä»…ä½œä¸ºå…¼å®¹
2. ğŸ’¡ æ¯å¹´çš„çƒå‘˜ç»Ÿè®¡æŒ‰è”èµ›åŒºåˆ†

---

## 5. ç¤¾äº¤æ¨¡å—

### 5.1 è·å–å¸–å­åˆ—è¡¨

**æ¥å£**: `GET /api/posts`

**ä½¿ç”¨åœºæ™¯**:
- é¦–é¡µåŠ¨æ€æµ
- æŒ‰åˆ†ç±»ç­›é€‰å¸–å­
- ä»…æ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‰€åœ¨å­¦æ ¡çš„å¸–å­

**å‰ç«¯é¡µé¢**: `PostFeed.tsx`, `MyPosts.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| categoryId | Long | null | è¿åŠ¨åˆ†ç±»IDï¼ˆå¯é€‰ï¼Œç­›é€‰æŸè¿åŠ¨åˆ†ç±»çš„å¸–å­ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": 1,
        "userId": 2,
        "userName": "æå››",
        "userAvatar": "https://example.com/avatar.jpg",
        "schoolId": 1,
        "schoolName": "æ¸…åå¤§å­¦",
        "categoryCode": "football",
        "content": "ä»Šå¤©çš„æ¯”èµ›å¤ªç²¾å½©äº†ï¼",
        "images": ["https://example.com/post1.jpg"],
        "likesCount": 120,
        "commentsCount": 15,
        "isLiked": false,
        "createdAt": "2025-12-01T10:30:00"
      }
    ]
  }
}
```

**ä¸šåŠ¡é€»è¾‘**:
1. åç«¯è‡ªåŠ¨ä»å½“å‰ç™»å½•ç”¨æˆ·çš„ `users.school_id` è·å–å­¦æ ¡ID
2. æŸ¥è¯¢æ¡ä»¶å¼ºåˆ¶æ·»åŠ  `WHERE posts.school_id = å½“å‰ç”¨æˆ·çš„school_id`
3. ç”¨æˆ·åªèƒ½çœ‹åˆ°å½“å‰å°±è¯»å­¦æ ¡çš„å¸–å­ï¼Œåˆ‡æ¢å­¦æ ¡åæ— æ³•çœ‹åˆ°æ—§å­¦æ ¡çš„å¸–å­

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ å¦‚æœç”¨æˆ·å·²æ¯•ä¸šï¼ˆusers.school_id ä¸º NULLï¼‰ï¼Œè¿”å›ç©ºåˆ—è¡¨
2. ğŸ’¡ å‰ç«¯æ— éœ€ä¼ é€’ schoolId å‚æ•°ï¼Œåç«¯è‡ªåŠ¨è¿‡æ»¤
3. ğŸ’¡ ç§»åŠ¨ç«¯åº”ç”¨ä¸ä½¿ç”¨åˆ†é¡µï¼Œåç«¯è¿”å›æ‰€æœ‰å¸–å­

---

### 5.2 è·å–å¸–å­è¯¦æƒ…

**æ¥å£**: `GET /api/posts/{id}`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹å¸–å­è¯¦æƒ…å’Œè¯„è®º

**å‰ç«¯é¡µé¢**: `PostDetail.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "content": "ä»Šå¤©çš„æ¯”èµ›å¤ªç²¾å½©äº†ï¼",
    "comments": [
      {
        "id": 1,
        "userName": "ç‹äº”",
        "content": "è¯´å¾—å¯¹ï¼",
        "likesCount": 12,
        "createdAt": "2025-12-01T10:35:00"
      }
    ]
  }
}
```

---

### 5.3 å‘å¸ƒå¸–å­

**æ¥å£**: `POST /api/posts`

**ä½¿ç”¨åœºæ™¯**:
- å‘å¸ƒæ–°å¸–å­
- å‘å¸–æ—¶è‡ªåŠ¨ç»‘å®šç”¨æˆ·å½“å‰å°±è¯»å­¦æ ¡

**å‰ç«¯é¡µé¢**: `CreatePost.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "categoryId": 1,
  "content": "ä»Šå¤©çš„æ¯”èµ›å¤ªç²¾å½©äº†ï¼",
  "images": ["https://example.com/upload/123.jpg"]
}
```

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "å‘å¸ƒæˆåŠŸ",
  "data": {
    "id": 1,
    "userId": 2,
    "schoolId": 1,
    "categoryId": 1,
    "content": "ä»Šå¤©çš„æ¯”èµ›å¤ªç²¾å½©äº†ï¼",
    "images": ["https://example.com/upload/123.jpg"],
    "createdAt": "2025-12-09T11:00:00"
  }
}
```

**ä¸šåŠ¡é€»è¾‘**:
1. åç«¯ä»å½“å‰ç™»å½•ç”¨æˆ·çš„ `users.school_id` è‡ªåŠ¨è·å–å­¦æ ¡ID
2. åˆ›å»ºå¸–å­æ—¶ï¼Œ`posts.school_id` å­—æ®µè‡ªåŠ¨è®¾ç½®ä¸ºç”¨æˆ·çš„å½“å‰å­¦æ ¡ID
3. ç”¨æˆ·æ— éœ€ï¼ˆä¹Ÿæ— æ³•ï¼‰ä¼ é€’ schoolId å‚æ•°

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ å†…å®¹é•¿åº¦1-5000å­—ç¬¦
2. âš ï¸ æœ€å¤š9å¼ å›¾ç‰‡
3. âš ï¸ 1åˆ†é’Ÿå†…æœ€å¤šå‘å¸ƒ3æ¡
4. âš ï¸ å¦‚æœç”¨æˆ·å·²æ¯•ä¸šï¼ˆusers.school_id ä¸º NULLï¼‰ï¼Œè¿”å›é”™è¯¯ç  40007ï¼Œæç¤º"æ¯•ä¸šç”¨æˆ·æš‚ä¸æ”¯æŒå‘å¸–"
5. ğŸ’¡ school_id å­—æ®µå¯¹å‰ç«¯é€æ˜ï¼Œç”±åç«¯è‡ªåŠ¨å¤„ç†

---

### 5.4 ç‚¹èµå¸–å­

**æ¥å£**: `POST /api/posts/{id}/like`

**ä½¿ç”¨åœºæ™¯**:
- ç‚¹èµå¸–å­

**å‰ç«¯é¡µé¢**: `PostFeed.tsx`, `PostDetail.tsx`

---

### 5.5 å–æ¶ˆç‚¹èµ

**æ¥å£**: `DELETE /api/posts/{id}/like`

---

### 5.6 è¯„è®ºå¸–å­

**æ¥å£**: `POST /api/posts/{id}/comments`

**ä½¿ç”¨åœºæ™¯**:
- å‘è¡¨è¯„è®º

**å‰ç«¯é¡µé¢**: `PostDetail.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "content": "è¯´å¾—å¤ªå¯¹äº†ï¼",
  "parentId": 0
}
```

---

### 5.7 åˆ é™¤å¸–å­

**æ¥å£**: `DELETE /api/posts/{id}`

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ åªèƒ½åˆ é™¤è‡ªå·±çš„å¸–å­
2. âš ï¸ é€»è¾‘åˆ é™¤ï¼ˆdeleted=1ï¼ŒMyBatis Plusè‡ªåŠ¨è¿‡æ»¤ï¼‰

---

## 6. æ¶ˆæ¯é€šçŸ¥æ¨¡å—

### 6.1 è·å–é€šçŸ¥åˆ—è¡¨

**æ¥å£**: `GET /api/notifications`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹æ¶ˆæ¯é€šçŸ¥

**å‰ç«¯é¡µé¢**: `MyMessages.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| type | String | all | é€šçŸ¥ç±»å‹ï¼šlike/comment/follow/all |
| current | Integer | 1 | é¡µç  |
| size | Integer | 20 | æ¯é¡µå¤§å° |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": 1,
        "type": "like",
        "userName": "æå››",
        "content": "èµäº†ä½ çš„å¸–å­",
        "isRead": false,
        "createdAt": "2025-12-01T15:00:00"
      }
    ],
    "unreadCount": 5
  }
}
```

---

### 6.2 æ ‡è®°å·²è¯»

**æ¥å£**: `PUT /api/notifications/{id}/read`

---

### 6.3 å…¨éƒ¨å·²è¯»

**æ¥å£**: `PUT /api/notifications/read-all`

---

### 6.4 æœªè¯»æ•°é‡

**æ¥å£**: `GET /api/notifications/unread-count`

**ä½¿ç”¨åœºæ™¯**:
- åº•éƒ¨å¯¼èˆªæ çº¢ç‚¹æç¤º

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "unreadCount": 5
  }
}
```

---

## 7. ç³»ç»ŸåŠŸèƒ½æ¨¡å—

### 7.2 è·å–å­¦æ ¡åˆ—è¡¨

**æ¥å£**: `GET /api/schools`

**ä½¿ç”¨åœºæ™¯**:
- æ³¨å†Œæ—¶é€‰æ‹©å­¦æ ¡
- ç³»ç»Ÿåˆå§‹åŒ–æ—¶è·å–å­¦æ ¡åˆ—è¡¨

**å‰ç«¯é¡µé¢**: `Register.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| province | String | null | çœä»½ç­›é€‰ï¼ˆå¯é€‰ï¼‰ |
| city | String | null | åŸå¸‚ç­›é€‰ï¼ˆå¯é€‰ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "æ¸…åå¤§å­¦",
      "code": "THU",
      "province": "åŒ—äº¬",
      "city": "åŒ—äº¬å¸‚"
    },
    {
      "id": 2,
      "name": "åŒ—äº¬å¤§å­¦",
      "code": "PKU",
      "province": "åŒ—äº¬",
      "city": "åŒ—äº¬å¸‚"
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ æŒ‰ sort_order æ’åº
2. âš ï¸ åªè¿”å› status=1 çš„å¯ç”¨å­¦æ ¡
3. ğŸ’¡ å‰ç«¯å¯åŠ¨æ—¶ç¼“å­˜å­¦æ ¡åˆ—è¡¨

---

### 7.3 è·å–å­¦é™¢åˆ—è¡¨

**æ¥å£**: `GET /api/departments`

**ä½¿ç”¨åœºæ™¯**:
- æ³¨å†Œæ—¶æ ¹æ®å­¦æ ¡é€‰æ‹©å­¦é™¢

**å‰ç«¯é¡µé¢**: `Register.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| schoolId | Long | æ˜¯ | å­¦æ ¡ID |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "schoolId": 1,
      "name": "è®¡ç®—æœºç³»",
      "code": "CS"
    },
    {
      "id": 2,
      "schoolId": 1,
      "name": "ç»ç®¡å­¦é™¢",
      "code": "SEM"
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ schoolId ä¸ºå¿…å¡«å‚æ•°
2. âš ï¸ æŒ‰ sort_order æ’åº
3. âš ï¸ åªè¿”å› status=1 çš„å¯ç”¨å­¦é™¢
4. ğŸ’¡ å‰ç«¯æ ¹æ®é€‰æ‹©çš„å­¦æ ¡åŠ¨æ€åŠ è½½å­¦é™¢åˆ—è¡¨

---

### 7.4 éªŒè¯å­¦å·æ˜¯å¦å­˜åœ¨

**æ¥å£**: `GET /api/students/validate`

**ä½¿ç”¨åœºæ™¯**:
- æ³¨å†Œæ—¶å®æ—¶éªŒè¯å­¦å·

**å‰ç«¯é¡µé¢**: `Register.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| studentId | String | æ˜¯ | å­¦å· |
| schoolId | Long | æ˜¯ | å­¦æ ¡ID |
| departmentId | Long | æ˜¯ | å­¦é™¢ID |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "valid": true,
    "message": "å­¦å·éªŒè¯é€šè¿‡"
  }
}
```

**å¤±è´¥å“åº”**:

```json
{
  "code": 200,
  "data": {
    "valid": false,
    "message": "è¯¥å­¦å·ä¸å­˜åœ¨æˆ–å­¦æ ¡/å­¦é™¢ä¿¡æ¯ä¸åŒ¹é…"
  }
}
```

**æ³¨æ„äº‹é¡¹**:
1. ğŸ’¡ å‰ç«¯å»ºè®®é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
2. ğŸ’¡ å¯ä»¥åœ¨è¡¨å•æäº¤å‰å†æ¬¡éªŒè¯
3. âš ï¸ ä»…éªŒè¯å­¦ç”Ÿæ˜¯å¦å­˜åœ¨ï¼Œä¸è¿”å›å­¦ç”Ÿè¯¦ç»†ä¿¡æ¯

---

### 7.5 æ–‡ä»¶ä¸Šä¼ 

**æ¥å£**: `POST /api/common/upload`

**ä½¿ç”¨åœºæ™¯**:
- ä¸Šä¼ å¤´åƒã€å¸–å­å›¾ç‰‡

**è¯·æ±‚ç±»å‹**: `multipart/form-data`

**è¯·æ±‚å¤´**:
```
Authorization: Bearer <JWT Token>
Content-Type: multipart/form-data
```

**è¯·æ±‚å‚æ•°**:

```
file: [äºŒè¿›åˆ¶æ–‡ä»¶]ï¼ˆå¿…å¡«ï¼Œä»…æ”¯æŒå›¾ç‰‡ï¼‰
```

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "ä¸Šä¼ æˆåŠŸ",
  "data": "https://cdn.example.com/upload/abc123.jpg",
  "timestamp": 1701234567890
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ éœ€ç™»å½•ï¼Œå‰ç«¯ä¼šè‡ªåŠ¨æºå¸¦ Authorization å¤´
2. âš ï¸ ä»…æ”¯æŒ JPG/JPEGã€PNGã€GIFï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§ 5MB
3. ğŸ’¡ å‰ç«¯å·²å†…ç½®æ ¼å¼/å¤§å°æ ¡éªŒï¼Œä¸Šä¼ å¤±è´¥ä¼šæç¤ºé‡æ–°é€‰æ‹©

---

## 8. é”™è¯¯ç è¯´æ˜

### 8.1 ä¸šåŠ¡é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 40001 | è´¦å·å·²å­˜åœ¨ | æ›´æ¢è´¦å·é‡æ–°æ³¨å†Œ |
| 40002 | è´¦å·æˆ–å¯†ç é”™è¯¯ | æ£€æŸ¥è¾“å…¥ |
| 40003 | è´¦å·å·²è¢«ç¦ç”¨ | è”ç³»ç®¡ç†å‘˜ |
| 40004 | å‚æ•°éªŒè¯å¤±è´¥ | æ£€æŸ¥è¯·æ±‚å‚æ•° |
| 40005 | å­¦å·éªŒè¯å¤±è´¥ | è¯¥å­¦å·ä¸å­˜åœ¨æˆ–å­¦æ ¡/å­¦é™¢ä¿¡æ¯ä¸åŒ¹é… |
| 40006 | æ•™è‚²ç»å†å·²å­˜åœ¨ | åŒä¸€å­¦æ ¡+å­¦å·çš„æ•™è‚²ç»å†å·²æ·»åŠ  |
| 40007 | æ¯•ä¸šç”¨æˆ·ç¦æ­¢å‘å¸– | æ¯•ä¸šç”¨æˆ·ï¼ˆschool_idä¸ºNULLï¼‰æš‚ä¸æ”¯æŒå‘å¸– |
| 40101 | Tokenæ— æ•ˆæˆ–è¿‡æœŸ | é‡æ–°ç™»å½• |
| 40301 | æ— æƒé™æ“ä½œ | æ£€æŸ¥æ“ä½œæƒé™ |
| 40401 | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥èµ„æºID |
| 40901 | é‡å¤æ“ä½œ | é¿å…é‡å¤æäº¤ |
| 50001 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

---

## 9. å‰ç«¯é¡µé¢ä¸æ¥å£å¯¹åº”å…³ç³»

### 9.1 ç™»å½•æ³¨å†Œæµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| Login.tsx | POST /api/auth/login | ç”¨æˆ·ç™»å½• |
| Register.tsx | POST /api/auth/register | ç”¨æˆ·æ³¨å†Œ |
| Register.tsx | GET /api/schools | è·å–å­¦æ ¡åˆ—è¡¨ |
| Register.tsx | GET /api/departments | è·å–å­¦é™¢åˆ—è¡¨ |
| Register.tsx | GET /api/students/validate | éªŒè¯å­¦å· |

---

### 9.2 é¦–é¡µæµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| Navbar.tsx | GET /api/categories | è·å–è¿åŠ¨åˆ†ç±» |
| MatchList.tsx | GET /api/matches | è·å–æœ€è¿‘æ¯”èµ› |
| PostFeed.tsx | GET /api/posts | è·å–å¸–å­åˆ—è¡¨ |

---

### 9.3 èµ›äº‹æµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| AllMatches.tsx | GET /api/matches | è·å–å…¨éƒ¨æ¯”èµ› |
| MatchDetail.tsx | GET /api/matches/{id} | è·å–æ¯”èµ›è¯¦æƒ… |
| Standings.tsx | GET /api/standings | è·å–ç§¯åˆ†æ¦œ |
| PlayerStats.tsx | GET /api/player-stats | è·å–çƒå‘˜ç»Ÿè®¡ |

---

### 9.4 ç¤¾äº¤æµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| CreatePost.tsx | POST /api/posts | å‘å¸ƒå¸–å­ |
| CreatePost.tsx | POST /api/common/upload | ä¸Šä¼ å›¾ç‰‡ |
| PostDetail.tsx | GET /api/posts/{id} | è·å–å¸–å­è¯¦æƒ… |
| PostDetail.tsx | POST /api/posts/{id}/like | ç‚¹èµå¸–å­ |
| PostDetail.tsx | POST /api/posts/{id}/comments | è¯„è®ºå¸–å­ |

---

### 9.5 ä¸ªäººä¸­å¿ƒæµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| Profile.tsx | GET /api/auth/current | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| EditProfile.tsx | PUT /api/users/{id} | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| EditProfile.tsx | GET /api/users/{id}/educations | è·å–æ•™è‚²ç»å†åˆ—è¡¨ |
| EditProfile.tsx | DELETE /api/users/educations/{id} | åˆ é™¤æ•™è‚²ç»å† |
| EditProfile.tsx | POST /api/common/upload | ä¸Šä¼ å¤´åƒ |
| AddEducation.tsx | GET /api/schools | è·å–å­¦æ ¡åˆ—è¡¨ |
| AddEducation.tsx | GET /api/departments | è·å–å­¦é™¢åˆ—è¡¨ |
| AddEducation.tsx | POST /api/users/educations | æ·»åŠ æ•™è‚²ç»å† |
| MyPosts.tsx | GET /api/users/{id}/posts | è·å–æˆ‘çš„å¸–å­ |
| MyMessages.tsx | GET /api/notifications | è·å–é€šçŸ¥åˆ—è¡¨ |
| FollowingList.tsx | GET /api/users/{id}/following | è·å–å…³æ³¨åˆ—è¡¨ |
| UserProfile.tsx | GET /api/users/{id} | è·å–ç”¨æˆ·ä¿¡æ¯ |
| UserProfile.tsx | POST /api/users/{id}/follow | å…³æ³¨ç”¨æˆ· |

---

## é™„å½•ï¼šæ•°æ®å­—å…¸

### è¿åŠ¨åˆ†ç±» (category_code)

| Code | Name | Icon |
|------|------|------|
| football | è¶³çƒ | âš½ |
| basketball | ç¯®çƒ | ğŸ€ |
| badminton | ç¾½æ¯›çƒ | ğŸ¸ |
| pingpong | ä¹’ä¹“çƒ | ğŸ“ |
| fitness | å¥èº« | ğŸ’ª |

### æ¯”èµ›çŠ¶æ€ (match_status)

| Value | Text |
|-------|------|
| upcoming | æœªå¼€å§‹ |
| live | è¿›è¡Œä¸­ |
| finished | å·²ç»“æŸ |

### é€šçŸ¥ç±»å‹ (notification_type)

| Value | Text |
|-------|------|
| like | ç‚¹èµé€šçŸ¥ |
| comment | è¯„è®ºé€šçŸ¥ |
| follow | å…³æ³¨é€šçŸ¥ |
| system | ç³»ç»Ÿé€šçŸ¥ |

---

**æ–‡æ¡£ç»´æŠ¤è€…**: UniSport å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-12-03  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.1.0
