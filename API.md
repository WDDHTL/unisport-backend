# UniSport API æ¥å£æ–‡æ¡£

> **ç‰ˆæœ¬**: v1.0.0  
> **æ›´æ–°æ—¶é—´**: 2025-12-01  
> **åŸºç¡€URL**: `http://localhost:8080/api`  
> **å‰ç«¯åœ°å€**: `http://localhost:5173`

---

## ğŸ“‹ ç›®å½•

- [1. æ¥å£è§„èŒƒ](#1-æ¥å£è§„èŒƒ)
- [2. è®¤è¯æˆæƒæ¨¡å—](#2-è®¤è¯æˆæƒæ¨¡å—)
- [3. ç”¨æˆ·æ¨¡å—](#3-ç”¨æˆ·æ¨¡å—)
- [4. èµ›äº‹æ¨¡å—](#4-èµ›äº‹æ¨¡å—)
- [5. ç¤¾äº¤æ¨¡å—](#5-ç¤¾äº¤æ¨¡å—)
- [6. æ¶ˆæ¯é€šçŸ¥æ¨¡å—](#6-æ¶ˆæ¯é€šçŸ¥æ¨¡å—)
- [7. ç³»ç»ŸåŠŸèƒ½æ¨¡å—](#7-ç³»ç»ŸåŠŸèƒ½æ¨¡å—)
- [8. é”™è¯¯ç è¯´æ˜](#8-é”™è¯¯ç è¯´æ˜)
- [9. å‰ç«¯é¡µé¢ä¸æ¥å£å¯¹åº”å…³ç³»](#9-å‰ç«¯é¡µé¢ä¸æ¥å£å¯¹åº”å…³ç³»)

---

## 1. æ¥å£è§„èŒƒ

### 1.1 ç»Ÿä¸€å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£ç»Ÿä¸€è¿”å›ä»¥ä¸‹JSONæ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {},
  "timestamp": 1701234567890
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `code`: çŠ¶æ€ç ï¼ˆ200æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ï¼‰
- `message`: è¿”å›æ¶ˆæ¯
- `data`: è¿”å›æ•°æ®ï¼ˆå¯ä»¥æ˜¯å¯¹è±¡ã€æ•°ç»„æˆ–nullï¼‰
- `timestamp`: æ—¶é—´æˆ³

### 1.2 åˆ†é¡µå“åº”æ ¼å¼

åˆ†é¡µæ¥å£é¢å¤–åŒ…å«åˆ†é¡µä¿¡æ¯ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [],
    "total": 100,
    "current": 1,
    "size": 10,
    "pages": 10
  },
  "timestamp": 1701234567890
}
```

### 1.3 HTTP çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|---------|
| 200 | æ“ä½œæˆåŠŸ | è¯·æ±‚å¤„ç†æˆåŠŸ |
| 201 | åˆ›å»ºæˆåŠŸ | POST è¯·æ±‚åˆ›å»ºèµ„æºæˆåŠŸ |
| 400 | å‚æ•°é”™è¯¯ | è¯·æ±‚å‚æ•°ä¸åˆæ³• |
| 401 | æœªè®¤è¯ | Token ç¼ºå¤±æˆ–æ— æ•ˆ |
| 403 | æ— æƒé™ | æ²¡æœ‰æ“ä½œæƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### 1.4 è¯·æ±‚å¤´

#### å…¬å¼€æ¥å£ï¼ˆæ— éœ€è®¤è¯ï¼‰
```http
Content-Type: application/json
```

#### éœ€è®¤è¯æ¥å£
```http
Content-Type: application/json
Authorization: Bearer <JWT Token>
```

---

## 2. è®¤è¯æˆæƒæ¨¡å—

### 2.1 ç”¨æˆ·æ³¨å†Œ

**æ¥å£**: `POST /api/auth/register`

**ä½¿ç”¨åœºæ™¯**:
- æ–°ç”¨æˆ·é€šè¿‡æ³¨å†Œé¡µé¢åˆ›å»ºè´¦å·
- åŸºäºå­¦å·éªŒè¯å­¦ç”Ÿèº«ä»½ï¼ˆè½¯ç»‘å®šï¼‰
- æ³¨å†ŒæˆåŠŸåè·³è½¬åˆ°ç™»å½•é¡µé¢

**å‰ç«¯é¡µé¢**: `Register.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "account": "2024001",
  "password": "123456",
  "school": "æ¸…åå¤§å­¦",
  "schoolId": 1,
  "department": "è®¡ç®—æœºç³»",
  "departmentId": 1,
  "studentId": "2024001001"
}
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| account | String | æ˜¯ | è´¦å·ï¼ˆæ‰‹æœºå·/å­¦å·ï¼‰ |
| password | String | æ˜¯ | å¯†ç ï¼ˆ6-20ä½ï¼‰ |
| school | String | æ˜¯ | å­¦æ ¡åç§° |
| schoolId | Long | æ˜¯ | å­¦æ ¡ID |
| department | String | æ˜¯ | å­¦é™¢åç§° |
| departmentId | Long | æ˜¯ | å­¦é™¢ID |
| studentId | String | æ˜¯ | å­¦å·ï¼ˆç”¨äºèº«ä»½éªŒè¯ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "id": 1,
    "account": "2024001",
    "nickname": "2024001",
    "school": "æ¸…åå¤§å­¦",
    "department": "è®¡ç®—æœºç³»",
    "studentId": "2024001001",
    "createdAt": "2025-12-01T10:00:00"
  }
}
```

**å¤±è´¥å“åº”ç¤ºä¾‹**:

```json
// è´¦å·å·²å­˜åœ¨
{
  "code": 40001,
  "message": "è´¦å·å·²å­˜åœ¨ï¼Œè¯·æ›´æ¢è´¦å·",
  "data": null
}

// å­¦å·å·²è¢«æ³¨å†Œ
{
  "code": 40002,
  "message": "è¯¥å­¦å·å·²è¢«æ³¨å†Œï¼Œä¸€ä¸ªå­¦å·åªèƒ½æ³¨å†Œä¸€ä¸ªè´¦å·",
  "data": null
}

// å­¦å·éªŒè¯å¤±è´¥
{
  "code": 40005,
  "message": "å­¦å·éªŒè¯å¤±è´¥ï¼šè¯¥å­¦å·ä¸å­˜åœ¨æˆ–å­¦æ ¡/å­¦é™¢ä¿¡æ¯ä¸åŒ¹é…",
  "data": null
}
```

**æ³¨å†ŒéªŒè¯é€»è¾‘**:

1. âœ… **åŸºç¡€æ ¡éªŒ**ï¼š
   - è´¦å·å”¯ä¸€æ€§æ ¡éªŒï¼ˆé”™è¯¯ç ï¼š40001ï¼‰
   - å­¦å·å”¯ä¸€æ€§æ ¡éªŒï¼ˆé”™è¯¯ç ï¼š40002ï¼‰
   - å¯†ç å¼ºåº¦æ ¡éªŒ
   - å¿…å¡«å­—æ®µå®Œæ•´æ€§æ ¡éªŒ

2. ğŸ“ **å­¦ç”Ÿèº«ä»½éªŒè¯ï¼ˆè½¯ç»‘å®šï¼‰**ï¼š
   ```sql
   SELECT * FROM students 
   WHERE student_id = ? 
     AND school_id = ? 
     AND department_id = ? 
     AND status = 1
   ```
   - å¦‚æœæŸ¥è¯¢åˆ°è®°å½•ï¼šéªŒè¯é€šè¿‡ï¼Œå…è®¸æ³¨å†Œ
   - å¦‚æœæŸ¥è¯¢ä¸åˆ°ï¼šæ³¨å†Œå¤±è´¥ï¼Œè¿”å›é”™è¯¯ç  40005

3. ğŸ’¾ **åˆ›å»ºç”¨æˆ·**ï¼š
   - å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
   - users.student_id å­—æ®µè®°å½•å­¦å·ï¼ˆä¸ students.student_id è½¯å…³è”ï¼‰
   - é»˜è®¤æ˜µç§°ä¸ºè´¦å·ï¼Œç”¨æˆ·å¯åç»­ä¿®æ”¹

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
2. âš ï¸ è´¦å·å”¯ä¸€æ€§æ ¡éªŒï¼ˆä¸€ä¸ªè´¦å·ä¸èƒ½é‡å¤æ³¨å†Œï¼‰
3. âš ï¸ å­¦å·å”¯ä¸€æ€§æ ¡éªŒï¼ˆä¸€ä¸ªå­¦å·åªèƒ½æ³¨å†Œä¸€ä¸ªè´¦å·ï¼‰
4. âš ï¸ å­¦å·å¿…é¡»åœ¨ students è¡¨ä¸­å­˜åœ¨ä¸”å­¦æ ¡/å­¦é™¢ä¿¡æ¯åŒ¹é…
5. âš ï¸ å­¦ç”ŸçŠ¶æ€å¿…é¡»ä¸ºåœ¨æ ¡ï¼ˆstatus=1ï¼‰
6. ğŸ’¡ å‰ç«¯æä¾›å­¦æ ¡å­¦é™¢ä¸‹æ‹‰é€‰æ‹©ï¼ˆè°ƒç”¨ GET /api/schools å’Œ GET /api/departmentsï¼‰
7. ğŸ’¡ å­¦å·è¾“å…¥æ¡†å®æ—¶éªŒè¯æ ¼å¼

---

### 2.2 ç”¨æˆ·ç™»å½•

**æ¥å£**: `POST /api/auth/login`

**ä½¿ç”¨åœºæ™¯**:
- ç”¨æˆ·ç™»å½•è·å– JWT Token

**å‰ç«¯é¡µé¢**: `Login.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "account": "2024001",
  "password": "123456"
}
```

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "nickname": "å¼ ä¸‰",
      "avatar": "https://example.com/avatar.jpg"
    }
  }
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ Token å­˜å‚¨åœ¨ localStorage
2. âš ï¸ Token é»˜è®¤7å¤©æœ‰æ•ˆ
3. ğŸ’¡ ç™»å½•å¤±è´¥3æ¬¡åå¢åŠ éªŒè¯ç 

---

## 3. ç”¨æˆ·æ¨¡å—

### 3.1 è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `GET /api/users/{id}`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹ç”¨æˆ·ä¸»é¡µ
- æŸ¥çœ‹å¸–å­ä½œè€…ä¿¡æ¯

**å‰ç«¯é¡µé¢**: `UserProfile.tsx`, `Profile.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "id": 2,
    "nickname": "æå››",
    "avatar": "https://example.com/avatar.jpg",
    "school": "æ¸…åå¤§å­¦",
    "department": "ç»ç®¡å­¦é™¢",
    "bio": "ç¯®çƒçˆ±å¥½è€…",
    "followersCount": 120,
    "followingCount": 50,
    "postsCount": 35,
    "isFollowing": false
  }
}
```

---

### 3.2 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `PUT /api/users/{id}`

**ä½¿ç”¨åœºæ™¯**:
- ç¼–è¾‘ä¸ªäººèµ„æ–™

**å‰ç«¯é¡µé¢**: `EditProfile.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "nickname": "å¼ ä¸‰ä¸°",
  "avatar": "https://example.com/avatar.jpg",
  "bio": "çƒ­çˆ±è¿åŠ¨",
  "studentId": "202400001",
  "gender": "male"
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ åªèƒ½ä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯
2. âš ï¸ éƒ¨åˆ†æ›´æ–°ï¼Œæœªæäº¤å­—æ®µä¿æŒä¸å˜
3. âš ï¸ accountã€schoolã€department ä¸å¯ä¿®æ”¹

---

### 3.3 å…³æ³¨ç”¨æˆ·

**æ¥å£**: `POST /api/users/{id}/follow`

**ä½¿ç”¨åœºæ™¯**:
- å…³æ³¨å…¶ä»–ç”¨æˆ·

**å‰ç«¯é¡µé¢**: `UserProfile.tsx`

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ ä¸èƒ½å…³æ³¨è‡ªå·±
2. âš ï¸ æ£€æŸ¥é‡å¤å…³æ³¨
3. âš ï¸ å‘é€é€šçŸ¥ç»™è¢«å…³æ³¨è€…

---

### 3.4 å–æ¶ˆå…³æ³¨

**æ¥å£**: `DELETE /api/users/{id}/follow`

**ä½¿ç”¨åœºæ™¯**:
- å–æ¶ˆå…³æ³¨ç”¨æˆ·

**å‰ç«¯é¡µé¢**: `UserProfile.tsx`, `FollowingList.tsx`

---

### 3.5 è·å–å…³æ³¨åˆ—è¡¨

**æ¥å£**: `GET /api/users/{id}/following`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹å…³æ³¨åˆ—è¡¨

**å‰ç«¯é¡µé¢**: `FollowingList.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| current | Integer | 1 | é¡µç  |
| size | Integer | 20 | æ¯é¡µå¤§å° |

---

## 4. èµ›äº‹æ¨¡å—

### 4.1 è·å–è¿åŠ¨åˆ†ç±»

**æ¥å£**: `GET /api/categories`

**ä½¿ç”¨åœºæ™¯**:
- é¦–é¡µå¯¼èˆªæ å±•ç¤ºåˆ†ç±»
- å‘å¸–æ—¶é€‰æ‹©åˆ†ç±»

**å‰ç«¯é¡µé¢**: `Navbar.tsx`, `CreatePost.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "code": "football",
      "name": "è¶³çƒ",
      "icon": "âš½",
      "sortOrder": 1
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ æŒ‰ sortOrder æ’åº
2. ğŸ’¡ å‰ç«¯å¯åŠ¨æ—¶è·å–ä¸€æ¬¡å³å¯

---

### 4.2 è·å–æ¯”èµ›åˆ—è¡¨

**æ¥å£**: `GET /api/matches`

**ä½¿ç”¨åœºæ™¯**:
- é¦–é¡µå±•ç¤ºæœ€è¿‘æ¯”èµ›
- å…¨éƒ¨èµ›äº‹åˆ—è¡¨

**å‰ç«¯é¡µé¢**: `MatchList.tsx`, `AllMatches.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| categoryCode | String | all | è¿åŠ¨åˆ†ç±» |
| status | String | all | æ¯”èµ›çŠ¶æ€ï¼šupcoming/live/finished/all |
| current | Integer | 1 | é¡µç  |
| size | Integer | 10 | æ¯é¡µå¤§å° |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": 1,
        "categoryCode": "football",
        "categoryName": "è¶³çƒ",
        "teamAName": "è®¡ç®—æœºç³»",
        "teamBName": "ç»ç®¡å­¦é™¢",
        "scoreA": 2,
        "scoreB": 1,
        "status": "finished",
        "matchTime": "2025-11-30T16:00:00",
        "location": "åŒ—åŒºä½“è‚²åœº"
      }
    ],
    "total": 25,
    "pages": 3
  }
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ æŒ‰æ¯”èµ›æ—¶é—´å€’åº
2. âš ï¸ å®æ—¶æ¯”èµ›æ¯30ç§’è½®è¯¢

---

### 4.3 è·å–æ¯”èµ›è¯¦æƒ…

**æ¥å£**: `GET /api/matches/{id}`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹æ¯”èµ›è¯¦ç»†ä¿¡æ¯
- æŸ¥çœ‹çƒå‘˜é˜µå®¹å’Œäº‹ä»¶æ—¶é—´è½´

**å‰ç«¯é¡µé¢**: `MatchDetail.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "teamAName": "è®¡ç®—æœºç³»",
    "teamBName": "ç»ç®¡å­¦é™¢",
    "scoreA": 2,
    "scoreB": 1,
    "playersA": [
      {
        "id": 1,
        "playerName": "å¼ ä¸‰",
        "jerseyNumber": 10,
        "position": "FW"
      }
    ],
    "events": [
      {
        "id": 1,
        "eventType": "goal",
        "minute": 23,
        "description": "å¼ ä¸‰ åŠ²å°„ç ´é—¨"
      }
    ]
  }
}
```

---

### 4.4 è·å–ç§¯åˆ†æ¦œ

**æ¥å£**: `GET /api/standings`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹è”èµ›ç§¯åˆ†æ’å

**å‰ç«¯é¡µé¢**: `Standings.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| categoryCode | String | æ˜¯ | è¿åŠ¨åˆ†ç±» |
| year | Integer | å¦ | å¹´ä»½ï¼Œé»˜è®¤å½“å‰å¹´ä»½ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "rank": 1,
      "teamName": "è®¡ç®—æœºç³»",
      "played": 5,
      "won": 4,
      "drawn": 1,
      "lost": 0,
      "points": 13
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ è®¡åˆ†è§„åˆ™ï¼šèƒœ3åˆ†ã€å¹³1åˆ†ã€è´Ÿ0åˆ†
2. ğŸ’¡ ç¼“å­˜ç§¯åˆ†æ¦œæ•°æ®

---

### 4.5 è·å–çƒå‘˜ç»Ÿè®¡

**æ¥å£**: `GET /api/player-stats`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹å°„æ‰‹æ¦œã€å¾—åˆ†æ¦œ

**å‰ç«¯é¡µé¢**: `PlayerStats.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| categoryCode | String | æ˜¯ | è¿åŠ¨åˆ†ç±» |
| year | Integer | å¦ | å¹´ä»½ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "rank": 1,
      "playerName": "å¼ ä¸‰",
      "teamName": "è®¡ç®—æœºç³»",
      "played": 5,
      "goals": 8
    }
  ]
}
```

---

## 5. ç¤¾äº¤æ¨¡å—

### 5.1 è·å–å¸–å­åˆ—è¡¨

**æ¥å£**: `GET /api/posts`

**ä½¿ç”¨åœºæ™¯**:
- é¦–é¡µåŠ¨æ€æµ
- æŒ‰åˆ†ç±»ç­›é€‰å¸–å­

**å‰ç«¯é¡µé¢**: `PostFeed.tsx`, `MyPosts.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| categoryCode | String | all | è¿åŠ¨åˆ†ç±» |
| current | Integer | 1 | é¡µç  |
| size | Integer | 10 | æ¯é¡µå¤§å° |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": 1,
        "userId": 2,
        "userName": "æå››",
        "userAvatar": "https://example.com/avatar.jpg",
        "categoryCode": "football",
        "content": "ä»Šå¤©çš„æ¯”èµ›å¤ªç²¾å½©äº†ï¼",
        "images": ["https://example.com/post1.jpg"],
        "likesCount": 120,
        "commentsCount": 15,
        "isLiked": false,
        "createdAt": "2025-12-01T10:30:00"
      }
    ]
  }
}
```

---

### 5.2 è·å–å¸–å­è¯¦æƒ…

**æ¥å£**: `GET /api/posts/{id}`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹å¸–å­è¯¦æƒ…å’Œè¯„è®º

**å‰ç«¯é¡µé¢**: `PostDetail.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "id": 1,
    "content": "ä»Šå¤©çš„æ¯”èµ›å¤ªç²¾å½©äº†ï¼",
    "comments": [
      {
        "id": 1,
        "userName": "ç‹äº”",
        "content": "è¯´å¾—å¯¹ï¼",
        "likesCount": 12,
        "createdAt": "2025-12-01T10:35:00"
      }
    ]
  }
}
```

---

### 5.3 å‘å¸ƒå¸–å­

**æ¥å£**: `POST /api/posts`

**ä½¿ç”¨åœºæ™¯**:
- å‘å¸ƒæ–°å¸–å­

**å‰ç«¯é¡µé¢**: `CreatePost.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "categoryCode": "football",
  "content": "ä»Šå¤©çš„æ¯”èµ›å¤ªç²¾å½©äº†ï¼",
  "images": ["https://example.com/upload/123.jpg"]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ å†…å®¹é•¿åº¦1-5000å­—ç¬¦
2. âš ï¸ æœ€å¤š9å¼ å›¾ç‰‡
3. âš ï¸ 1åˆ†é’Ÿå†…æœ€å¤šå‘å¸ƒ3æ¡

---

### 5.4 ç‚¹èµå¸–å­

**æ¥å£**: `POST /api/posts/{id}/like`

**ä½¿ç”¨åœºæ™¯**:
- ç‚¹èµå¸–å­

**å‰ç«¯é¡µé¢**: `PostFeed.tsx`, `PostDetail.tsx`

---

### 5.5 å–æ¶ˆç‚¹èµ

**æ¥å£**: `DELETE /api/posts/{id}/like`

---

### 5.6 è¯„è®ºå¸–å­

**æ¥å£**: `POST /api/posts/{id}/comments`

**ä½¿ç”¨åœºæ™¯**:
- å‘è¡¨è¯„è®º

**å‰ç«¯é¡µé¢**: `PostDetail.tsx`

**è¯·æ±‚å‚æ•°**:

```json
{
  "content": "è¯´å¾—å¤ªå¯¹äº†ï¼",
  "parentId": 0
}
```

---

### 5.7 åˆ é™¤å¸–å­

**æ¥å£**: `DELETE /api/posts/{id}`

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ åªèƒ½åˆ é™¤è‡ªå·±çš„å¸–å­
2. âš ï¸ é€»è¾‘åˆ é™¤ï¼ˆdeleted=1ï¼‰

---

## 6. æ¶ˆæ¯é€šçŸ¥æ¨¡å—

### 6.1 è·å–é€šçŸ¥åˆ—è¡¨

**æ¥å£**: `GET /api/notifications`

**ä½¿ç”¨åœºæ™¯**:
- æŸ¥çœ‹æ¶ˆæ¯é€šçŸ¥

**å‰ç«¯é¡µé¢**: `MyMessages.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| type | String | all | é€šçŸ¥ç±»å‹ï¼šlike/comment/follow/all |
| current | Integer | 1 | é¡µç  |
| size | Integer | 20 | æ¯é¡µå¤§å° |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "records": [
      {
        "id": 1,
        "type": "like",
        "userName": "æå››",
        "content": "èµäº†ä½ çš„å¸–å­",
        "isRead": false,
        "createdAt": "2025-12-01T15:00:00"
      }
    ],
    "unreadCount": 5
  }
}
```

---

### 6.2 æ ‡è®°å·²è¯»

**æ¥å£**: `PUT /api/notifications/{id}/read`

---

### 6.3 å…¨éƒ¨å·²è¯»

**æ¥å£**: `PUT /api/notifications/read-all`

---

### 6.4 æœªè¯»æ•°é‡

**æ¥å£**: `GET /api/notifications/unread-count`

**ä½¿ç”¨åœºæ™¯**:
- åº•éƒ¨å¯¼èˆªæ çº¢ç‚¹æç¤º

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "unreadCount": 5
  }
}
```

---

## 7. ç³»ç»ŸåŠŸèƒ½æ¨¡å—

### 7.2 è·å–å­¦æ ¡åˆ—è¡¨

**æ¥å£**: `GET /api/schools`

**ä½¿ç”¨åœºæ™¯**:
- æ³¨å†Œæ—¶é€‰æ‹©å­¦æ ¡
- ç³»ç»Ÿåˆå§‹åŒ–æ—¶è·å–å­¦æ ¡åˆ—è¡¨

**å‰ç«¯é¡µé¢**: `Register.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| province | String | null | çœä»½ç­›é€‰ï¼ˆå¯é€‰ï¼‰ |
| city | String | null | åŸå¸‚ç­›é€‰ï¼ˆå¯é€‰ï¼‰ |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "æ¸…åå¤§å­¦",
      "code": "THU",
      "province": "åŒ—äº¬",
      "city": "åŒ—äº¬å¸‚"
    },
    {
      "id": 2,
      "name": "åŒ—äº¬å¤§å­¦",
      "code": "PKU",
      "province": "åŒ—äº¬",
      "city": "åŒ—äº¬å¸‚"
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ æŒ‰ sort_order æ’åº
2. âš ï¸ åªè¿”å› status=1 çš„å¯ç”¨å­¦æ ¡
3. ğŸ’¡ å‰ç«¯å¯åŠ¨æ—¶ç¼“å­˜å­¦æ ¡åˆ—è¡¨

---

### 7.3 è·å–å­¦é™¢åˆ—è¡¨

**æ¥å£**: `GET /api/departments`

**ä½¿ç”¨åœºæ™¯**:
- æ³¨å†Œæ—¶æ ¹æ®å­¦æ ¡é€‰æ‹©å­¦é™¢

**å‰ç«¯é¡µé¢**: `Register.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| schoolId | Long | æ˜¯ | å­¦æ ¡ID |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "schoolId": 1,
      "name": "è®¡ç®—æœºç³»",
      "code": "CS"
    },
    {
      "id": 2,
      "schoolId": 1,
      "name": "ç»ç®¡å­¦é™¢",
      "code": "SEM"
    }
  ]
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ schoolId ä¸ºå¿…å¡«å‚æ•°
2. âš ï¸ æŒ‰ sort_order æ’åº
3. âš ï¸ åªè¿”å› status=1 çš„å¯ç”¨å­¦é™¢
4. ğŸ’¡ å‰ç«¯æ ¹æ®é€‰æ‹©çš„å­¦æ ¡åŠ¨æ€åŠ è½½å­¦é™¢åˆ—è¡¨

---

### 7.4 éªŒè¯å­¦å·æ˜¯å¦å­˜åœ¨

**æ¥å£**: `GET /api/students/validate`

**ä½¿ç”¨åœºæ™¯**:
- æ³¨å†Œæ—¶å®æ—¶éªŒè¯å­¦å·

**å‰ç«¯é¡µé¢**: `Register.tsx`

**æŸ¥è¯¢å‚æ•°**:

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| studentId | String | æ˜¯ | å­¦å· |
| schoolId | Long | æ˜¯ | å­¦æ ¡ID |
| departmentId | Long | æ˜¯ | å­¦é™¢ID |

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "valid": true,
    "message": "å­¦å·éªŒè¯é€šè¿‡"
  }
}
```

**å¤±è´¥å“åº”**:

```json
{
  "code": 200,
  "data": {
    "valid": false,
    "message": "è¯¥å­¦å·ä¸å­˜åœ¨æˆ–å­¦æ ¡/å­¦é™¢ä¿¡æ¯ä¸åŒ¹é…"
  }
}
```

**æ³¨æ„äº‹é¡¹**:
1. ğŸ’¡ å‰ç«¯å»ºè®®é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
2. ğŸ’¡ å¯ä»¥åœ¨è¡¨å•æäº¤å‰å†æ¬¡éªŒè¯
3. âš ï¸ ä»…éªŒè¯å­¦ç”Ÿæ˜¯å¦å­˜åœ¨ï¼Œä¸è¿”å›å­¦ç”Ÿè¯¦ç»†ä¿¡æ¯

---

### 7.5 æ–‡ä»¶ä¸Šä¼ 

**æ¥å£**: `POST /api/upload`

**ä½¿ç”¨åœºæ™¯**:
- ä¸Šä¼ å¤´åƒã€å¸–å­å›¾ç‰‡

**è¯·æ±‚ç±»å‹**: `multipart/form-data`

**è¯·æ±‚å‚æ•°**:

```
file: [äºŒè¿›åˆ¶æ–‡ä»¶]
type: avatar / post
```

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": {
    "url": "https://cdn.example.com/uploads/abc123.jpg"
  }
}
```

**æ³¨æ„äº‹é¡¹**:
1. âš ï¸ å¤´åƒé™åˆ¶2MBï¼Œå¸–å­å›¾ç‰‡5MB
2. âš ï¸ ä»…æ”¯æŒ jpgã€pngã€gif
3. ğŸ’¡ å‰ç«¯å‹ç¼©åä¸Šä¼ 

---

### 7.2 è·å–å­¦æ ¡åˆ—è¡¨

**æ¥å£**: `GET /api/schools`

**ä½¿ç”¨åœºæ™¯**:
- æ³¨å†Œæ—¶é€‰æ‹©å­¦æ ¡é™¢ç³»

**å‰ç«¯é¡µé¢**: `Register.tsx`

**æˆåŠŸå“åº”**:

```json
{
  "code": 200,
  "data": [
    {
      "name": "æ¸…åå¤§å­¦",
      "departments": ["è®¡ç®—æœºç³»", "ç»ç®¡å­¦é™¢"]
    }
  ]
}
```

---

## 8. é”™è¯¯ç è¯´æ˜

### 8.1 ä¸šåŠ¡é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|---------|
| 40001 | è´¦å·å·²å­˜åœ¨ | æ›´æ¢è´¦å·é‡æ–°æ³¨å†Œ |
| 40002 | è´¦å·æˆ–å¯†ç é”™è¯¯ | æ£€æŸ¥è¾“å…¥ |
| 40003 | è´¦å·å·²è¢«ç¦ç”¨ | è”ç³»ç®¡ç†å‘˜ |
| 40004 | å‚æ•°éªŒè¯å¤±è´¥ | æ£€æŸ¥è¯·æ±‚å‚æ•° |
| 40005 | å­¦å·éªŒè¯å¤±è´¥ | è¯¥å­¦å·ä¸å­˜åœ¨æˆ–å­¦æ ¡/å­¦é™¢ä¿¡æ¯ä¸åŒ¹é… |
| 40101 | Tokenæ— æ•ˆæˆ–è¿‡æœŸ | é‡æ–°ç™»å½• |
| 40301 | æ— æƒé™æ“ä½œ | æ£€æŸ¥æ“ä½œæƒé™ |
| 40401 | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥èµ„æºID |
| 40901 | é‡å¤æ“ä½œ | é¿å…é‡å¤æäº¤ |
| 50001 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

---

## 9. å‰ç«¯é¡µé¢ä¸æ¥å£å¯¹åº”å…³ç³»

### 9.1 ç™»å½•æ³¨å†Œæµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| Login.tsx | POST /api/auth/login | ç”¨æˆ·ç™»å½• |
| Register.tsx | POST /api/auth/register | ç”¨æˆ·æ³¨å†Œ |
| Register.tsx | GET /api/schools | è·å–å­¦æ ¡åˆ—è¡¨ |
| Register.tsx | GET /api/departments | è·å–å­¦é™¢åˆ—è¡¨ |
| Register.tsx | GET /api/students/validate | éªŒè¯å­¦å· |

---

### 9.2 é¦–é¡µæµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| Navbar.tsx | GET /api/categories | è·å–è¿åŠ¨åˆ†ç±» |
| MatchList.tsx | GET /api/matches?size=3 | è·å–æœ€è¿‘3åœºæ¯”èµ› |
| PostFeed.tsx | GET /api/posts | è·å–å¸–å­åˆ—è¡¨ |

---

### 9.3 èµ›äº‹æµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| AllMatches.tsx | GET /api/matches | è·å–å…¨éƒ¨æ¯”èµ› |
| MatchDetail.tsx | GET /api/matches/{id} | è·å–æ¯”èµ›è¯¦æƒ… |
| Standings.tsx | GET /api/standings | è·å–ç§¯åˆ†æ¦œ |
| PlayerStats.tsx | GET /api/player-stats | è·å–çƒå‘˜ç»Ÿè®¡ |

---

### 9.4 ç¤¾äº¤æµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| CreatePost.tsx | POST /api/posts | å‘å¸ƒå¸–å­ |
| CreatePost.tsx | POST /api/upload | ä¸Šä¼ å›¾ç‰‡ |
| PostDetail.tsx | GET /api/posts/{id} | è·å–å¸–å­è¯¦æƒ… |
| PostDetail.tsx | POST /api/posts/{id}/like | ç‚¹èµå¸–å­ |
| PostDetail.tsx | POST /api/posts/{id}/comments | è¯„è®ºå¸–å­ |

---

### 9.5 ä¸ªäººä¸­å¿ƒæµç¨‹

| é¡µé¢ | æ¥å£ | è¯´æ˜ |
|------|------|------|
| Profile.tsx | GET /api/auth/current | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| EditProfile.tsx | PUT /api/users/{id} | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ |
| EditProfile.tsx | POST /api/upload | ä¸Šä¼ å¤´åƒ |
| MyPosts.tsx | GET /api/users/{id}/posts | è·å–æˆ‘çš„å¸–å­ |
| MyMessages.tsx | GET /api/notifications | è·å–é€šçŸ¥åˆ—è¡¨ |
| FollowingList.tsx | GET /api/users/{id}/following | è·å–å…³æ³¨åˆ—è¡¨ |
| UserProfile.tsx | GET /api/users/{id} | è·å–ç”¨æˆ·ä¿¡æ¯ |
| UserProfile.tsx | POST /api/users/{id}/follow | å…³æ³¨ç”¨æˆ· |

---

## é™„å½•ï¼šæ•°æ®å­—å…¸

### è¿åŠ¨åˆ†ç±» (category_code)

| Code | Name | Icon |
|------|------|------|
| football | è¶³çƒ | âš½ |
| basketball | ç¯®çƒ | ğŸ€ |
| badminton | ç¾½æ¯›çƒ | ğŸ¸ |
| pingpong | ä¹’ä¹“çƒ | ğŸ“ |
| fitness | å¥èº« | ğŸ’ª |

### æ¯”èµ›çŠ¶æ€ (match_status)

| Value | Text |
|-------|------|
| upcoming | æœªå¼€å§‹ |
| live | è¿›è¡Œä¸­ |
| finished | å·²ç»“æŸ |

### é€šçŸ¥ç±»å‹ (notification_type)

| Value | Text |
|-------|------|
| like | ç‚¹èµé€šçŸ¥ |
| comment | è¯„è®ºé€šçŸ¥ |
| follow | å…³æ³¨é€šçŸ¥ |
| system | ç³»ç»Ÿé€šçŸ¥ |

---

**æ–‡æ¡£ç»´æŠ¤è€…**: UniSport å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-12-01  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
