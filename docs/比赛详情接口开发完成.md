# æ¯”èµ›è¯¦æƒ…æ¥å£å¼€å‘å®ŒæˆæŠ¥å‘Š

> **å¼€å‘æ—¥æœŸ**: 2025-12-06  
> **æ¥å£**: `GET /api/matches/{id}`  
> **åŠŸèƒ½**: è·å–æ¯”èµ›è¯¦æƒ…ï¼ŒåŒ…å«çƒå‘˜é˜µå®¹å’Œæ¯”èµ›äº‹ä»¶

---

## âœ… å¼€å‘å†…å®¹

### 1. æ–°å¢å®ä½“ç±»

#### TeamMember.java
- **è·¯å¾„**: `src/main/java/com/unisport/entity/TeamMember.java`
- **åŠŸèƒ½**: é˜Ÿä¼æˆå‘˜å®ä½“ç±»ï¼Œå¯¹åº” `team_members` è¡¨
- **å­—æ®µ**:
  - `id`: è®°å½•ID
  - `teamId`: é˜Ÿä¼ID
  - `userId`: ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰
  - `playerName`: çƒå‘˜å§“å
  - `jerseyNumber`: çƒè¡£å·ç 
  - `position`: ä½ç½®ï¼ˆGK/DF/MF/FWï¼‰
  - `joinedAt`: åŠ å…¥æ—¶é—´

#### MatchEvent.java
- **è·¯å¾„**: `src/main/java/com/unisport/entity/MatchEvent.java`
- **åŠŸèƒ½**: æ¯”èµ›äº‹ä»¶å®ä½“ç±»ï¼Œå¯¹åº” `match_events` è¡¨
- **å­—æ®µ**:
  - `id`: äº‹ä»¶ID
  - `matchId`: æ¯”èµ›ID
  - `eventType`: äº‹ä»¶ç±»å‹ï¼ˆgoal/yellow_card/red_card/substitution/whistle/otherï¼‰
  - `minute`: å‘ç”Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  - `teamSide`: ç›¸å…³é˜Ÿä¼ï¼ˆA/B/neutralï¼‰
  - `playerId`: ç›¸å…³çƒå‘˜ID
  - `description`: äº‹ä»¶æè¿°
  - `createdAt`: åˆ›å»ºæ—¶é—´

---

### 2. æ–°å¢è§†å›¾å¯¹è±¡

#### MatchDetailVO.java
- **è·¯å¾„**: `src/main/java/com/unisport/vo/MatchDetailVO.java`
- **åŠŸèƒ½**: æ¯”èµ›è¯¦æƒ…è§†å›¾å¯¹è±¡
- **ä¸»è¦å­—æ®µ**:
  - æ¯”èµ›åŸºæœ¬ä¿¡æ¯ï¼ˆç»§æ‰¿è‡ª MatchVOï¼‰
  - `playersA`: Aé˜Ÿçƒå‘˜é˜µå®¹åˆ—è¡¨
  - `playersB`: Bé˜Ÿçƒå‘˜é˜µå®¹åˆ—è¡¨
  - `events`: æ¯”èµ›äº‹ä»¶æ—¶é—´è½´åˆ—è¡¨

**å†…åµŒç±»**:
- `PlayerVO`: çƒå‘˜ä¿¡æ¯
  - `id`: çƒå‘˜ID
  - `playerName`: çƒå‘˜å§“å
  - `jerseyNumber`: çƒè¡£å·ç 
  - `position`: ä½ç½®
  
- `EventVO`: æ¯”èµ›äº‹ä»¶
  - `id`: äº‹ä»¶ID
  - `eventType`: äº‹ä»¶ç±»å‹
  - `minute`: å‘ç”Ÿæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  - `description`: äº‹ä»¶æè¿°

---

### 3. æ–°å¢Mapperæ¥å£

#### TeamMemberMapper.java
- **è·¯å¾„**: `src/main/java/com/unisport/mapper/TeamMemberMapper.java`
- **åŠŸèƒ½**: é˜Ÿä¼æˆå‘˜æ•°æ®è®¿é—®æ¥å£

#### MatchEventMapper.java
- **è·¯å¾„**: `src/main/java/com/unisport/mapper/MatchEventMapper.java`
- **åŠŸèƒ½**: æ¯”èµ›äº‹ä»¶æ•°æ®è®¿é—®æ¥å£

---

### 4. Serviceå±‚å®ç°

#### MatchService.java
- **æ–°å¢æ–¹æ³•**: `MatchDetailVO getMatchDetail(Long id)`

#### MatchServiceImpl.java
- **å®ç°é€»è¾‘**:
  1. æŸ¥è¯¢æ¯”èµ›åŸºæœ¬ä¿¡æ¯
  2. å¡«å……è¿åŠ¨åˆ†ç±»ä¿¡æ¯
  3. æŸ¥è¯¢Aé˜Ÿçƒå‘˜é˜µå®¹ï¼ˆå¦‚æœå­˜åœ¨teamAIdï¼‰
  4. æŸ¥è¯¢Bé˜Ÿçƒå‘˜é˜µå®¹ï¼ˆå¦‚æœå­˜åœ¨teamBIdï¼‰
  5. æŸ¥è¯¢æ¯”èµ›äº‹ä»¶æ—¶é—´è½´ï¼ˆæŒ‰æ—¶é—´æ­£åºï¼‰
  6. å¼‚å¸¸å¤„ç†ä¸æ—¥å¿—è®°å½•

**å…³é”®ç‰¹æ€§**:
- âœ… ç©ºå€¼å®‰å…¨å¤„ç†
- âœ… çƒå‘˜æŒ‰çƒè¡£å·ç æ’åº
- âœ… äº‹ä»¶æŒ‰æ—¶é—´æ­£åºæ’åˆ—
- âœ… å®Œæ•´çš„å¼‚å¸¸æ•è·å’Œæ—¥å¿—è®°å½•

---

### 5. Controllerå±‚å®ç°

#### MatchController.java
- **æ–°å¢æ¥å£**: `GET /api/matches/{id}`
- **è¯·æ±‚å‚æ•°**: è·¯å¾„å‚æ•° `id`ï¼ˆæ¯”èµ›IDï¼‰
- **è¿”å›æ ¼å¼**:

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 1,
    "categoryCode": "football",
    "categoryName": "è¶³çƒ",
    "teamAName": "è®¡ç®—æœºå­¦é™¢è¶³çƒé˜Ÿ",
    "teamBName": "åŒ–å­¦é™¢è¶³çƒé˜Ÿ",
    "scoreA": 2,
    "scoreB": 1,
    "status": "finished",
    "matchTime": "2024-10-15T14:00:00",
    "location": "ä¸»ä½“è‚²åœº",
    "playersA": [
      {
        "id": 1,
        "playerName": "å¼ ä¸‰",
        "jerseyNumber": 1,
        "position": "GK"
      }
    ],
    "playersB": [...],
    "events": [
      {
        "id": 1,
        "eventType": "goal",
        "minute": 30,
        "description": "è®¡ç®—æœºå­¦é™¢9å·éƒ‘æ¥ æ¥6å·å‘¨æ´ä¼ çƒç ´é—¨ï¼"
      }
    ]
  },
  "timestamp": 1764989532636
}
```

**é”™è¯¯å“åº”**ï¼ˆæ¯”èµ›ä¸å­˜åœ¨ï¼‰:
```json
{
  "code": 40401,
  "message": "æ¯”èµ›ä¸å­˜åœ¨",
  "timestamp": 1764989547681
}
```

---

## ğŸ§ª æµ‹è¯•ç»“æœ

### æµ‹è¯•ç”¨ä¾‹ 1ï¼šæ­£å¸¸æŸ¥è¯¢æ¯”èµ›è¯¦æƒ…
- **è¯·æ±‚**: `GET /api/matches/1`
- **ç»“æœ**: âœ… æˆåŠŸ
- **è¿”å›æ•°æ®**:
  - æ¯”èµ›åŸºæœ¬ä¿¡æ¯å®Œæ•´
  - Aé˜Ÿçƒå‘˜æ•°ï¼š11äºº
  - Bé˜Ÿçƒå‘˜æ•°ï¼š11äºº
  - æ¯”èµ›äº‹ä»¶æ•°ï¼š4ä¸ª

### æµ‹è¯•ç”¨ä¾‹ 2ï¼šæŸ¥è¯¢è¿›è¡Œä¸­çš„æ¯”èµ›
- **è¯·æ±‚**: `GET /api/matches/4`
- **ç»“æœ**: âœ… æˆåŠŸ
- **è¿”å›æ•°æ®**:
  - æ¯”èµ›çŠ¶æ€ï¼šliveï¼ˆè¿›è¡Œä¸­ï¼‰
  - Aé˜Ÿçƒå‘˜æ•°ï¼š11äºº
  - Bé˜Ÿçƒå‘˜æ•°ï¼š11äºº
  - æ¯”èµ›äº‹ä»¶æ•°ï¼š2ä¸ª

### æµ‹è¯•ç”¨ä¾‹ 3ï¼šæŸ¥è¯¢ä¸å­˜åœ¨çš„æ¯”èµ›
- **è¯·æ±‚**: `GET /api/matches/999`
- **ç»“æœ**: âœ… æˆåŠŸ
- **è¿”å›**: é”™è¯¯ç  40401ï¼Œæç¤º"æ¯”èµ›ä¸å­˜åœ¨"

---

## ğŸ“‹ æ¥å£ç‰¹æ€§

### 1. æ•°æ®å®Œæ•´æ€§
- âœ… åŒ…å«æ¯”èµ›åŸºæœ¬ä¿¡æ¯
- âœ… åŒ…å«è¿åŠ¨åˆ†ç±»ä¿¡æ¯
- âœ… åŒ…å«åŒæ–¹çƒå‘˜é˜µå®¹
- âœ… åŒ…å«æ¯”èµ›äº‹ä»¶æ—¶é—´è½´

### 2. å…¼å®¹æ€§å¤„ç†
- âœ… æ”¯æŒæ²¡æœ‰çƒé˜ŸIDçš„æ¯”èµ›ï¼ˆè¿”å›ç©ºæ•°ç»„ï¼‰
- âœ… æ”¯æŒæ²¡æœ‰çƒå‘˜çš„çƒé˜Ÿï¼ˆè¿”å›ç©ºæ•°ç»„ï¼‰
- âœ… æ”¯æŒæ²¡æœ‰äº‹ä»¶çš„æ¯”èµ›ï¼ˆè¿”å›ç©ºæ•°ç»„ï¼‰

### 3. æ•°æ®æ’åº
- âœ… çƒå‘˜æŒ‰çƒè¡£å·ç å‡åºæ’åˆ—
- âœ… äº‹ä»¶æŒ‰å‘ç”Ÿæ—¶é—´å‡åºæ’åˆ—

### 4. é”™è¯¯å¤„ç†
- âœ… æ¯”èµ›ä¸å­˜åœ¨æ—¶è¿”å› 40401 é”™è¯¯
- âœ… ç³»ç»Ÿå¼‚å¸¸æ—¶è®°å½•è¯¦ç»†æ—¥å¿—
- âœ… ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œå“åº”æ ¼å¼

---

## ğŸ“ APIæ–‡æ¡£å¯¹ç…§

| APIæ–‡æ¡£è¦æ±‚ | å®ç°æƒ…å†µ | è¯´æ˜ |
|------------|---------|------|
| æ¥å£è·¯å¾„ | âœ… | `GET /api/matches/{id}` |
| è¿”å›æ¯”èµ›åŸºæœ¬ä¿¡æ¯ | âœ… | åŒ…å«æ‰€æœ‰å­—æ®µ |
| è¿”å›çƒå‘˜é˜µå®¹ playersA | âœ… | åŒ…å«id/playerName/jerseyNumber/position |
| è¿”å›çƒå‘˜é˜µå®¹ playersB | âœ… | åŒ…å«id/playerName/jerseyNumber/position |
| è¿”å›æ¯”èµ›äº‹ä»¶ events | âœ… | åŒ…å«id/eventType/minute/description |
| é”™è¯¯å¤„ç† | âœ… | æ¯”èµ›ä¸å­˜åœ¨è¿”å›40401 |

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### å¾…å®ç°çš„æ¥å£

1. **GET /api/standings** - è·å–ç§¯åˆ†æ¦œ
   - éœ€è¦åˆ›å»º Standing å®ä½“ç±»
   - å®ç°ç§¯åˆ†è®¡ç®—é€»è¾‘ï¼ˆèƒœ3åˆ†ã€å¹³1åˆ†ã€è´Ÿ0åˆ†ï¼‰

2. **GET /api/player-stats** - è·å–çƒå‘˜ç»Ÿè®¡
   - éœ€è¦ç»Ÿè®¡è¿›çƒæ•°ã€å‡ºåœºæ¬¡æ•°ç­‰
   - æŒ‰åˆ†ç±»å’Œå¹´ä»½ç­›é€‰

### ä¼˜åŒ–å»ºè®®

1. **ç¼“å­˜ä¼˜åŒ–**
   - å¯¹å·²ç»“æŸçš„æ¯”èµ›è¯¦æƒ…è¿›è¡Œç¼“å­˜
   - ä½¿ç”¨Redisç¼“å­˜çƒ­é—¨æ¯”èµ›æ•°æ®

2. **æ€§èƒ½ä¼˜åŒ–**
   - è€ƒè™‘ä½¿ç”¨MyBatis-Plusçš„å…³è”æŸ¥è¯¢ä¼˜åŒ–
   - å‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°

3. **æ•°æ®éªŒè¯**
   - æ·»åŠ æ¯”èµ›IDçš„å‚æ•°éªŒè¯
   - æ·»åŠ æ›´è¯¦ç»†çš„ä¸šåŠ¡å¼‚å¸¸

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ç±»å‹ | æ–‡ä»¶è·¯å¾„ |
|---------|---------|
| å®ä½“ç±» | `src/main/java/com/unisport/entity/TeamMember.java` |
| å®ä½“ç±» | `src/main/java/com/unisport/entity/MatchEvent.java` |
| VOç±» | `src/main/java/com/unisport/vo/MatchDetailVO.java` |
| Mapper | `src/main/java/com/unisport/mapper/TeamMemberMapper.java` |
| Mapper | `src/main/java/com/unisport/mapper/MatchEventMapper.java` |
| Service | `src/main/java/com/unisport/service/MatchService.java` |
| ServiceImpl | `src/main/java/com/unisport/service/impl/MatchServiceImpl.java` |
| Controller | `src/main/java/com/unisport/controller/MatchController.java` |

---

**å¼€å‘å®Œæˆæ—¶é—´**: 2025-12-06 10:52  
**å¼€å‘è€…**: UniSport Team  
**çŠ¶æ€**: âœ… å¼€å‘å®Œæˆå¹¶æµ‹è¯•é€šè¿‡
